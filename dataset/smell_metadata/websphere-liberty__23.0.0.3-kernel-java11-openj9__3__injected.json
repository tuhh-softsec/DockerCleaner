{"seed":9407,"processedDockerfileHash":"c62a681a621209e6e02c8dfdea56ed3a","fixedSmells":[],"successfullyFixedSmells":[],"processedDockerfile":"#  (C) Copyright IBM Corporation 2019.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM icr.io/appcafe/ibm-semeru-runtimes:open-11-jdk-ubi\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nARG VERBOSE=false\nARG OPENJ9_SCC=true\nARG EN_SHA=366618db4b733337adc71ec30b1f33d36cf78a81858636360061036a926f373f\nARG NON_IBM_SHA=d349f6ea3acd71910348904dd48f81940b86ca5f879737206ae37f858767ad0f\nARG NOTICES_SHA=e7031658e09e2442279db72eed9238fb30d98c06dabb112fb21b8618b7e810ee\nLABEL org.opencontainers.image.authors=\"Leo Christy Jesuraj, Arthur De Magalhaes, Chris Potter\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"23.0.0.3\" \\\n      org.opencontainers.image.revision=\"cl230320230319-1900\" \\\n      vendor=\"IBM\" \\\n      name=\"IBM WebSphere Liberty\" \\\n      version=\"23.0.0.3\" \\\n      summary=\"Image for WebSphere Liberty with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Red Hat's UBI 8\" \\\n      description=\"This image contains the WebSphere Liberty runtime with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Red Hat's UBI 8 as the base OS.  For more information on this image please see https://github.com/WASdev/ci.docker#building-an-application-image\"\n#  Install WebSphere Liberty\nENV LIBERTY_VERSION=\"23.0.0_03\"\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\nRUN yum -y install shadow-utils unzip wget findutils openssl \\\n && yum clean all \\\n && mkdir -p /licenses \\\n && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default \\\n && LIBERTY_URL=${LIBERTY_URL:-$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' ;)} \\\n && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n && LICENSE_BASE=$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*license:\\s//p' | sed 's/\\(.*\\)\\/.*/\\1\\//' | tr -d '\\r' ;) \\\n && wget ${LICENSE_BASE}en.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/en.html \\\n && wget ${LICENSE_BASE}non_ibm_license.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/non_ibm_license.html \\\n && wget ${LICENSE_BASE}notices.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/notices.html \\\n && echo \"$EN_SHA /licenses/en.html\" | sha256sum -c --strict --check \\\n && echo \"$NON_IBM_SHA /licenses/non_ibm_license.html\" | sha256sum -c --strict --check \\\n && echo \"$NOTICES_SHA /licenses/notices.html\" | sha256sum -c --strict --check \\\n && chmod -R g+x /usr/bin \\\n && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n && rm /tmp/wlp.zip \\\n && chown -R 1001:0 /opt/ibm/wlp \\\n && chmod -R g+rw /opt/ibm/wlp \\\n && yum -y remove shadow-utils unzip wget \\\n && yum clean all\nENV PATH=\"$PATH:/opt/ibm/wlp/bin:/opt/ibm/helpers/build\"\n#  Add labels for consumption by IBM Product Insights\nLABEL ProductID=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      ProductName=\"WebSphere Application Server Liberty\" \\\n      ProductVersion=\"23.0.0.3\" \\\n      BuildLabel=\"cl230320230319-1900\"\n#  Set Path Shortcuts\nENV LOG_DIR=\"/logs\" \\\n    WLP_OUTPUT_DIR=\"/opt/ibm/wlp/output\" \\\n    OPENJ9_SCC=\"$OPENJ9_SCC\"\n#  Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n#  Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n && mkdir /etc/wlp \\\n && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n && mkdir -p /home/default \\\n && mkdir /output \\\n && chmod -t /output \\\n && rm -rf /output \\\n && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n && ln -s /opt/ibm /liberty \\\n && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n && mkdir -p /config/configDropins/defaults \\\n && mkdir -p /config/configDropins/overrides \\\n && chown -R 1001:0 /config \\\n && chmod -R g+rw /config \\\n && chown -R 1001:0 /opt/ibm/helpers \\\n && chmod -R g+rwx /opt/ibm/helpers \\\n && chown -R 1001:0 /opt/ibm/fixes \\\n && chmod -R g+rwx /opt/ibm/fixes \\\n && chown -R 1001:0 /opt/ibm/wlp/usr \\\n && chmod -R g+rw /opt/ibm/wlp/usr \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rw /opt/ibm/wlp/output \\\n && chown -R 1001:0 /logs \\\n && chmod -R g+rw /logs \\\n && chown -R 1001:0 /etc/wlp \\\n && chmod -R g+rw /etc/wlp \\\n && chown -R 1001:0 /home/default \\\n && chmod -R g+rw /home/default\n#  Create a new SCC layer\nRUN if [ \"$OPENJ9_SCC\" = \"true\" ] ; then populate_scc.sh ; fi \\\n && rm -rf /output/messaging /output/resources/security /logs/* $WLP_OUTPUT_DIR/.classCache \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rwx /opt/ibm/wlp/output\n# These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=\"/tmp/.rnd\" \\\n    OPENJ9_JAVA_OPTIONS=\"-XX:+IgnoreUnrecognizedVMOptions -XX:+IdleTuningGcOnIdle -Xshareclasses:name=openj9_system_scc,cacheDir=/opt/java/.scc,readonly,nonFatal -Dosgi.checkConfiguration=false\"\nUSER 1001\nEXPOSE 9080/tcp 9443/tcp\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9080 || exit 1\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\nENV AWS_ACCESS_KEY=\"AKIA1WKBLJVJB4GGOUIQ\" \\\n    NPM_TOKEN=\"npm_-d4hl5rC-iUbWX9helJvvqlcStlh48Mi7h1E\"\n","originalDockerfile":"# (C) Copyright IBM Corporation 2019.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM icr.io/appcafe/ibm-semeru-runtimes:open-11-jdk-ubi\n\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n\nARG VERBOSE=false\nARG OPENJ9_SCC=true\nARG EN_SHA=366618db4b733337adc71ec30b1f33d36cf78a81858636360061036a926f373f\nARG NON_IBM_SHA=d349f6ea3acd71910348904dd48f81940b86ca5f879737206ae37f858767ad0f\nARG NOTICES_SHA=e7031658e09e2442279db72eed9238fb30d98c06dabb112fb21b8618b7e810ee\n\nLABEL org.opencontainers.image.authors=\"Leo Christy Jesuraj, Arthur De Magalhaes, Chris Potter\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"23.0.0.3\" \\\n      org.opencontainers.image.revision=\"cl230320230319-1900\" \\\n      vendor=\"IBM\" \\\n      name=\"IBM WebSphere Liberty\" \\\n      version=\"23.0.0.3\" \\\n      summary=\"Image for WebSphere Liberty with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Red Hat's UBI 8\" \\\n      description=\"This image contains the WebSphere Liberty runtime with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Red Hat's UBI 8 as the base OS.  For more information on this image please see https://github.com/WASdev/ci.docker#building-an-application-image\"\n\n# Install WebSphere Liberty\nENV LIBERTY_VERSION 23.0.0_03\n\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\n\nRUN yum -y install shadow-utils unzip wget findutils openssl \\\n    && yum clean all \\\n    && mkdir -p /licenses \\\n    && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default \\\n    && LIBERTY_URL=${LIBERTY_URL:-$(wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml  | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' )}  \\\n    && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n    && LICENSE_BASE=$(wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml  | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*license:\\s//p' | sed 's/\\(.*\\)\\/.*/\\1\\//' | tr -d '\\r') \\\n    && wget ${LICENSE_BASE}en.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/en.html \\\n    && wget ${LICENSE_BASE}non_ibm_license.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/non_ibm_license.html \\\n    && wget ${LICENSE_BASE}notices.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/notices.html \\\n    && echo \"$EN_SHA /licenses/en.html\" | sha256sum -c --strict --check \\\n    && echo \"$NON_IBM_SHA /licenses/non_ibm_license.html\" | sha256sum -c --strict --check \\\n    && echo \"$NOTICES_SHA /licenses/notices.html\" | sha256sum -c --strict --check \\\n    && chmod -R g+x /usr/bin \\\n    && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n    && rm /tmp/wlp.zip \\\n    && chown -R 1001:0 /opt/ibm/wlp \\\n    && chmod -R g+rw /opt/ibm/wlp \\\n    && yum -y remove shadow-utils unzip wget \\\n    && yum clean all\n\nENV PATH=$PATH:/opt/ibm/wlp/bin:/opt/ibm/helpers/build\n\n# Add labels for consumption by IBM Product Insights\nLABEL \"ProductID\"=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      \"ProductName\"=\"WebSphere Application Server Liberty\" \\\n      \"ProductVersion\"=\"23.0.0.3\" \\\n      \"BuildLabel\"=\"cl230320230319-1900\"\n\n# Set Path Shortcuts\nENV LOG_DIR=/logs \\\n    WLP_OUTPUT_DIR=/opt/ibm/wlp/output \\\n    OPENJ9_SCC=$OPENJ9_SCC\n\n# Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n    && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\n\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n\n# Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n    && mkdir /etc/wlp \\\n    && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n    && mkdir -p /home/default \\\n    && mkdir /output \\\n    && chmod -t /output \\\n    && rm -rf /output \\\n    && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n    && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n    && ln -s /opt/ibm /liberty \\\n    && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n    && mkdir -p /config/configDropins/defaults \\\n    && mkdir -p /config/configDropins/overrides \\\n    && chown -R 1001:0 /config \\\n    && chmod -R g+rw /config \\\n    && chown -R 1001:0 /opt/ibm/helpers \\\n    && chmod -R g+rwx /opt/ibm/helpers \\\n    && chown -R 1001:0 /opt/ibm/fixes \\\n    && chmod -R g+rwx /opt/ibm/fixes \\\n    && chown -R 1001:0 /opt/ibm/wlp/usr \\\n    && chmod -R g+rw /opt/ibm/wlp/usr \\\n    && chown -R 1001:0 /opt/ibm/wlp/output \\\n    && chmod -R g+rw /opt/ibm/wlp/output \\\n    && chown -R 1001:0 /logs \\\n    && chmod -R g+rw /logs \\\n    && chown -R 1001:0 /etc/wlp \\\n    && chmod -R g+rw /etc/wlp \\\n    && chown -R 1001:0 /home/default \\\n    && chmod -R g+rw /home/default\n\n# Create a new SCC layer\nRUN if [ \"$OPENJ9_SCC\" = \"true\" ]; then populate_scc.sh; fi \\\n    && rm -rf /output/messaging /output/resources/security /logs/* $WLP_OUTPUT_DIR/.classCache \\\n    && chown -R 1001:0 /opt/ibm/wlp/output \\\n    && chmod -R g+rwx /opt/ibm/wlp/output\n\n#These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=/tmp/.rnd \\\n    OPENJ9_JAVA_OPTIONS=\"-XX:+IgnoreUnrecognizedVMOptions -XX:+IdleTuningGcOnIdle -Xshareclasses:name=openj9_system_scc,cacheDir=/opt/java/.scc,readonly,nonFatal -Dosgi.checkConfiguration=false\"\n\nUSER 1001\n\nEXPOSE 9080 9443\n\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\n\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9080 || exit 1\n\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\n","injectedSmells":["pin-package-manager-versions-apt-get","use-wget-instead-of-add","do-not-have-secrets"],"originalDockerfileHash":"fb744ffb7d79ec5f9e5ecd245664765d","successfullyInjectedSmells":["do-not-have-secrets"],"originalDockerfileUglified":"#  (C) Copyright IBM Corporation 2019.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#       http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\nFROM icr.io/appcafe/ibm-semeru-runtimes:open-11-jdk-ubi\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nARG VERBOSE=false\nARG OPENJ9_SCC=true\nARG EN_SHA=366618db4b733337adc71ec30b1f33d36cf78a81858636360061036a926f373f\nARG NON_IBM_SHA=d349f6ea3acd71910348904dd48f81940b86ca5f879737206ae37f858767ad0f\nARG NOTICES_SHA=e7031658e09e2442279db72eed9238fb30d98c06dabb112fb21b8618b7e810ee\nLABEL org.opencontainers.image.authors=\"Leo Christy Jesuraj, Arthur De Magalhaes, Chris Potter\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"23.0.0.3\" \\\n      org.opencontainers.image.revision=\"cl230320230319-1900\" \\\n      vendor=\"IBM\" \\\n      name=\"IBM WebSphere Liberty\" \\\n      version=\"23.0.0.3\" \\\n      summary=\"Image for WebSphere Liberty with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Red Hat's UBI 8\" \\\n      description=\"This image contains the WebSphere Liberty runtime with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Red Hat's UBI 8 as the base OS.  For more information on this image please see https://github.com/WASdev/ci.docker#building-an-application-image\"\n#  Install WebSphere Liberty\nENV LIBERTY_VERSION=\"23.0.0_03\"\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\nRUN yum -y install shadow-utils unzip wget findutils openssl \\\n && yum clean all \\\n && mkdir -p /licenses \\\n && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default \\\n && LIBERTY_URL=${LIBERTY_URL:-$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' ;)} \\\n && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n && LICENSE_BASE=$( wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*license:\\s//p' | sed 's/\\(.*\\)\\/.*/\\1\\//' | tr -d '\\r' ;) \\\n && wget ${LICENSE_BASE}en.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/en.html \\\n && wget ${LICENSE_BASE}non_ibm_license.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/non_ibm_license.html \\\n && wget ${LICENSE_BASE}notices.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/notices.html \\\n && echo \"$EN_SHA /licenses/en.html\" | sha256sum -c --strict --check \\\n && echo \"$NON_IBM_SHA /licenses/non_ibm_license.html\" | sha256sum -c --strict --check \\\n && echo \"$NOTICES_SHA /licenses/notices.html\" | sha256sum -c --strict --check \\\n && chmod -R g+x /usr/bin \\\n && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n && rm /tmp/wlp.zip \\\n && chown -R 1001:0 /opt/ibm/wlp \\\n && chmod -R g+rw /opt/ibm/wlp \\\n && yum -y remove shadow-utils unzip wget \\\n && yum clean all\nENV PATH=\"$PATH:/opt/ibm/wlp/bin:/opt/ibm/helpers/build\"\n#  Add labels for consumption by IBM Product Insights\nLABEL ProductID=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      ProductName=\"WebSphere Application Server Liberty\" \\\n      ProductVersion=\"23.0.0.3\" \\\n      BuildLabel=\"cl230320230319-1900\"\n#  Set Path Shortcuts\nENV LOG_DIR=\"/logs\" \\\n    WLP_OUTPUT_DIR=\"/opt/ibm/wlp/output\" \\\n    OPENJ9_SCC=\"$OPENJ9_SCC\"\n#  Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n#  Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n && mkdir /etc/wlp \\\n && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n && mkdir -p /home/default \\\n && mkdir /output \\\n && chmod -t /output \\\n && rm -rf /output \\\n && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n && ln -s /opt/ibm /liberty \\\n && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n && mkdir -p /config/configDropins/defaults \\\n && mkdir -p /config/configDropins/overrides \\\n && chown -R 1001:0 /config \\\n && chmod -R g+rw /config \\\n && chown -R 1001:0 /opt/ibm/helpers \\\n && chmod -R g+rwx /opt/ibm/helpers \\\n && chown -R 1001:0 /opt/ibm/fixes \\\n && chmod -R g+rwx /opt/ibm/fixes \\\n && chown -R 1001:0 /opt/ibm/wlp/usr \\\n && chmod -R g+rw /opt/ibm/wlp/usr \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rw /opt/ibm/wlp/output \\\n && chown -R 1001:0 /logs \\\n && chmod -R g+rw /logs \\\n && chown -R 1001:0 /etc/wlp \\\n && chmod -R g+rw /etc/wlp \\\n && chown -R 1001:0 /home/default \\\n && chmod -R g+rw /home/default\n#  Create a new SCC layer\nRUN if [ \"$OPENJ9_SCC\" = \"true\" ] ; then populate_scc.sh ; fi \\\n && rm -rf /output/messaging /output/resources/security /logs/* $WLP_OUTPUT_DIR/.classCache \\\n && chown -R 1001:0 /opt/ibm/wlp/output \\\n && chmod -R g+rwx /opt/ibm/wlp/output\n# These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=\"/tmp/.rnd\" \\\n    OPENJ9_JAVA_OPTIONS=\"-XX:+IgnoreUnrecognizedVMOptions -XX:+IdleTuningGcOnIdle -Xshareclasses:name=openj9_system_scc,cacheDir=/opt/java/.scc,readonly,nonFatal -Dosgi.checkConfiguration=false\"\nUSER 1001\nEXPOSE 9080/tcp 9443/tcp\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\nHEALTHCHECK CMD curl --fail http://127.0.0.1:9080 || exit 1\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\n","originalDockerfileUglifiedHash":"cab86b154cb9803e1d1f7219f162efa0","fileName":"/ICSME-replicationpackage/dataset/smellfree_dockerfiles/websphere-liberty__23.0.0.3-kernel-java11-openj9.dockerfile"}