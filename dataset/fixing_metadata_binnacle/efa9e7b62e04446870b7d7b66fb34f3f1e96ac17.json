{"seed":3298739436,"processedDockerfileHash":"9f5b7e0360a035cd613ac0511ca27673","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-pip","use-copy-instead-of-add","have-a-healthcheck"],"processedDockerfile":"FROM registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7\nEXPOSE 8080/tcp\nENV PATH=\"$HOME/.local/bin/:$PATH\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\"\nENV SUMMARY=\"OWASP ZAP Jenkins slave.\" \\\n    DESCRIPTION=\"Jenkins pipeline slave with OWASP ZAP.\"\nLABEL summary=\"$SUMMARY\" \\\n      description=\"$DESCRIPTION\" \\\n      io.k8s.description=\"$DESCRIPTION\" \\\n      io.k8s.display-name=\"Jenkins-Pipeline-OWASP-ZAP\" \\\n      io.openshift.expose-services=\"8080:http\" \\\n      io.openshift.tags=\"builder,jenkins-jnlp-owasp-zap,jenkins-jnlp\" \\\n      release=\"1\"\n#   NOTES:\n#   We need to call 2 (!) yum commands before being able to enable repositories properly\n#   This is a workaround for https://bugzilla.redhat.com/show_bug.cgi?id=1479388\n#   Chrome install info: https://access.redhat.com/discussions/917293\nRUN yum repolist > /dev/null \\\n && yum install -y yum-utils \\\n && yum-config-manager --disable * &> /dev/null \\\n && yum-config-manager --enable rhel-server-rhscl-7-rpms \\\n && yum-config-manager --enable rhel-7-server-rpms \\\n && yum-config-manager --enable rhel-7-server-extras-rpms \\\n && yum-config-manager --enable rhel-7-server-optional-rpms \\\n && yum-config-manager --enable rhel-7-server-fastrack-rpms \\\n && yum-config-manager --enable epel \\\n && yum clean all -y\n#   yum update -y\nRUN UNINSTALL_PKGS=\"java-1.8.0-openjdk-headless.i686 libstdc++-4.8.5-16.el7.i686\" \\\n && yum remove -y $UNINSTALL_PKGS \\\n && yum install -y redhat-rpm-config make automake autoconf gcc gcc-c++ libstdc++ libstdc++-devel java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-headless.x86_64 java-1.8.0-openjdk-devel.x86_64 wget nano curl git gzip gettext tar xorg-x11-server-Xvfb xterm vnc-server net-tools python27-python-pip firefox nss_wrapper \\\n && yum -y clean all\nRUN wget https://pypi.python.org/packages/source/s/setuptools/setuptools-7.0.tar.gz --no-check-certificate \\\n && tar xzf setuptools-7.0.tar.gz \\\n && cd setuptools-7.0 \\\n && python setup.py install \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py\nRUN pip install pip==23.1 --upgrade \\\n && pip install zapcli==0.10.0 \\\n && pip install python-owasp-zap-v2.4==0.0.21\nCOPY rpms/*.rpm ./\nRUN yum -y localinstall xmlstarlet-1.6.1-1.el7.x86_64.rpm \\\n && yum -y localinstall imlib2-1.4.5-9.el7.x86_64.rpm \\\n && yum -y localinstall pyxdg-0.25-2.el7.nux.noarch.rpm \\\n && yum -y localinstall openbox-libs-3.5.2-6.2.x86_64.rpm \\\n && yum -y localinstall openbox-3.5.2-6.2.x86_64.rpm \\\n && yum -y localinstall x11vnc-0.9.13-11.el7.x86_64.rpm \\\n && yum -y clean all \\\n && rm ./*.rpm \\\n && if [ ! -d /tmp/.X11-unix ] ; then mkdir /tmp/.X11-unix ; fi \\\n && mkdir -p /zap/wrk \\\n && mkdir /zap@tmp \\\n && mkdir -p /var/lib/jenkins/.vnc\nCOPY zap /zap/\n#   Copy the entrypoint\nCOPY configuration/* /var/lib/jenkins/\nENV PATH=\"/zap:$PATH\"\nENV ZAP_PATH=\"/zap/zap.sh\"\nENV HOME=\"/var/lib/jenkins\"\n#   Default port for use with zapcli\nENV ZAP_PORT=\"8080\"\nCOPY policies /var/lib/jenkins/.ZAP/policies/\nCOPY .xinitrc /var/lib/jenkins/\nWORKDIR /zap\n#   Download and expand the latest stable release \nRUN curl -s https://raw.githubusercontent.com/zaproxy/zap-admin/master/ZapVersions-dev.xml | xmlstarlet sel -t -v //url | grep -i Linux | wget -q --content-disposition -i - -O - | tar zx --strip-components=1 \\\n && curl -s -L https://bitbucket.org/meszarv/webswing/downloads/webswing-2.3-distribution.zip | jar -x \\\n && touch AcceptedLicense\nCOPY webswing.config /zap/webswing-2.3/webswing.config\nRUN chown -v -R root:root /zap \\\n && chown -v -R root:root /var/lib/jenkins \\\n && chmod -v -R 777 /var/lib/jenkins \\\n && chmod -v -R 777 /zap \\\n && chmod -v -R 777 /zap@tmp \\\n && chmod -v -R 1777 /tmp/.X11-unix \\\n && chown -v -R root:root /tmp/.X11-unix/\nWORKDIR /var/lib/jenkins\nENV OPENSHIFT_JENKINS_JVM_ARCH=\"x86_64\"\nUSER 1001\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7\nEXPOSE 8080/tcp\nENV PATH=\"$HOME/.local/bin/:$PATH\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\"\nENV SUMMARY=\"OWASP ZAP Jenkins slave.\" \\\n    DESCRIPTION=\"Jenkins pipeline slave with OWASP ZAP.\"\nLABEL summary=\"$SUMMARY\" \\\n      description=\"$DESCRIPTION\" \\\n      io.k8s.description=\"$DESCRIPTION\" \\\n      io.k8s.display-name=\"Jenkins-Pipeline-OWASP-ZAP\" \\\n      io.openshift.expose-services=\"8080:http\" \\\n      io.openshift.tags=\"builder,jenkins-jnlp-owasp-zap,jenkins-jnlp\" \\\n      release=\"1\"\n#  NOTES:\n#  We need to call 2 (!) yum commands before being able to enable repositories properly\n#  This is a workaround for https://bugzilla.redhat.com/show_bug.cgi?id=1479388\n#  Chrome install info: https://access.redhat.com/discussions/917293\nRUN yum repolist > /dev/null \\\n && yum install -y yum-utils \\\n && yum-config-manager --disable * &> /dev/null \\\n && yum-config-manager --enable rhel-server-rhscl-7-rpms \\\n && yum-config-manager --enable rhel-7-server-rpms \\\n && yum-config-manager --enable rhel-7-server-extras-rpms \\\n && yum-config-manager --enable rhel-7-server-optional-rpms \\\n && yum-config-manager --enable rhel-7-server-fastrack-rpms \\\n && yum-config-manager --enable epel \\\n && yum clean all -y\n#  yum update -y\nRUN UNINSTALL_PKGS=\"java-1.8.0-openjdk-headless.i686 libstdc++-4.8.5-16.el7.i686\" \\\n && yum remove -y $UNINSTALL_PKGS \\\n && yum install -y redhat-rpm-config make automake autoconf gcc gcc-c++ libstdc++ libstdc++-devel java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-headless.x86_64 java-1.8.0-openjdk-devel.x86_64 wget nano curl git gzip gettext tar xorg-x11-server-Xvfb xterm vnc-server net-tools python27-python-pip firefox nss_wrapper \\\n && yum -y clean all\nRUN wget https://pypi.python.org/packages/source/s/setuptools/setuptools-7.0.tar.gz --no-check-certificate \\\n && tar xzf setuptools-7.0.tar.gz \\\n && cd setuptools-7.0 \\\n && python setup.py install \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py\nRUN pip install pip --upgrade \\\n && pip install zapcli \\\n && pip install python-owasp-zap-v2.4\nCOPY rpms/*.rpm ./\nRUN yum -y localinstall xmlstarlet-1.6.1-1.el7.x86_64.rpm \\\n && yum -y localinstall imlib2-1.4.5-9.el7.x86_64.rpm \\\n && yum -y localinstall pyxdg-0.25-2.el7.nux.noarch.rpm \\\n && yum -y localinstall openbox-libs-3.5.2-6.2.x86_64.rpm \\\n && yum -y localinstall openbox-3.5.2-6.2.x86_64.rpm \\\n && yum -y localinstall x11vnc-0.9.13-11.el7.x86_64.rpm \\\n && yum -y clean all \\\n && rm ./*.rpm \\\n && if [ ! -d /tmp/.X11-unix ] ; then mkdir /tmp/.X11-unix ; fi \\\n && mkdir -p /zap/wrk \\\n && mkdir /zap@tmp \\\n && mkdir -p /var/lib/jenkins/.vnc\nADD zap /zap/\n#  Copy the entrypoint\nCOPY configuration/* /var/lib/jenkins/\nENV PATH=\"/zap:$PATH\"\nENV ZAP_PATH=\"/zap/zap.sh\"\nENV HOME=\"/var/lib/jenkins\"\n#  Default port for use with zapcli\nENV ZAP_PORT=\"8080\"\nCOPY policies /var/lib/jenkins/.ZAP/policies/\nCOPY .xinitrc /var/lib/jenkins/\nWORKDIR /zap\n#  Download and expand the latest stable release \nRUN curl -s https://raw.githubusercontent.com/zaproxy/zap-admin/master/ZapVersions-dev.xml | xmlstarlet sel -t -v //url | grep -i Linux | wget -q --content-disposition -i - -O - | tar zx --strip-components=1 \\\n && curl -s -L https://bitbucket.org/meszarv/webswing/downloads/webswing-2.3-distribution.zip | jar -x \\\n && touch AcceptedLicense\nADD webswing.config /zap/webswing-2.3/webswing.config\nRUN chown -v -R root:root /zap \\\n && chown -v -R root:root /var/lib/jenkins \\\n && chmod -v -R 777 /var/lib/jenkins \\\n && chmod -v -R 777 /zap \\\n && chmod -v -R 777 /zap@tmp \\\n && chmod -v -R 1777 /tmp/.X11-unix \\\n && chown -v -R root:root /tmp/.X11-unix/\nWORKDIR /var/lib/jenkins\nENV OPENSHIFT_JENKINS_JVM_ARCH=\"x86_64\"\nUSER 1001\n","injectedSmells":[],"originalDockerfileHash":"0b168dfd6ae75982b0c041e6c49ec4ec","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7\nEXPOSE 8080/tcp\nENV PATH=\"$HOME/.local/bin/:$PATH\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    LANG=\"en_US.UTF-8\"\nENV SUMMARY=\"OWASP ZAP Jenkins slave.\" \\\n    DESCRIPTION=\"Jenkins pipeline slave with OWASP ZAP.\"\nLABEL summary=\"$SUMMARY\" \\\n      description=\"$DESCRIPTION\" \\\n      io.k8s.description=\"$DESCRIPTION\" \\\n      io.k8s.display-name=\"Jenkins-Pipeline-OWASP-ZAP\" \\\n      io.openshift.expose-services=\"8080:http\" \\\n      io.openshift.tags=\"builder,jenkins-jnlp-owasp-zap,jenkins-jnlp\" \\\n      release=\"1\"\n#   NOTES:\n#   We need to call 2 (!) yum commands before being able to enable repositories properly\n#   This is a workaround for https://bugzilla.redhat.com/show_bug.cgi?id=1479388\n#   Chrome install info: https://access.redhat.com/discussions/917293\nRUN yum repolist > /dev/null \\\n && yum install -y yum-utils \\\n && yum-config-manager --disable * &> /dev/null \\\n && yum-config-manager --enable rhel-server-rhscl-7-rpms \\\n && yum-config-manager --enable rhel-7-server-rpms \\\n && yum-config-manager --enable rhel-7-server-extras-rpms \\\n && yum-config-manager --enable rhel-7-server-optional-rpms \\\n && yum-config-manager --enable rhel-7-server-fastrack-rpms \\\n && yum-config-manager --enable epel \\\n && yum clean all -y\n#   yum update -y\nRUN UNINSTALL_PKGS=\"java-1.8.0-openjdk-headless.i686 libstdc++-4.8.5-16.el7.i686\" \\\n && yum remove -y $UNINSTALL_PKGS \\\n && yum install -y redhat-rpm-config make automake autoconf gcc gcc-c++ libstdc++ libstdc++-devel java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-headless.x86_64 java-1.8.0-openjdk-devel.x86_64 wget nano curl git gzip gettext tar xorg-x11-server-Xvfb xterm vnc-server net-tools python27-python-pip firefox nss_wrapper \\\n && yum -y clean all\nRUN wget https://pypi.python.org/packages/source/s/setuptools/setuptools-7.0.tar.gz --no-check-certificate \\\n && tar xzf setuptools-7.0.tar.gz \\\n && cd setuptools-7.0 \\\n && python setup.py install \\\n && wget https://bootstrap.pypa.io/get-pip.py \\\n && python get-pip.py\nRUN pip install pip --upgrade \\\n && pip install zapcli \\\n && pip install python-owasp-zap-v2.4\nCOPY rpms/*.rpm ./\nRUN yum -y localinstall xmlstarlet-1.6.1-1.el7.x86_64.rpm \\\n && yum -y localinstall imlib2-1.4.5-9.el7.x86_64.rpm \\\n && yum -y localinstall pyxdg-0.25-2.el7.nux.noarch.rpm \\\n && yum -y localinstall openbox-libs-3.5.2-6.2.x86_64.rpm \\\n && yum -y localinstall openbox-3.5.2-6.2.x86_64.rpm \\\n && yum -y localinstall x11vnc-0.9.13-11.el7.x86_64.rpm \\\n && yum -y clean all \\\n && rm ./*.rpm \\\n && if [ ! -d /tmp/.X11-unix ] ; then mkdir /tmp/.X11-unix ; fi \\\n && mkdir -p /zap/wrk \\\n && mkdir /zap@tmp \\\n && mkdir -p /var/lib/jenkins/.vnc\nADD zap /zap/\n#   Copy the entrypoint\nCOPY configuration/* /var/lib/jenkins/\nENV PATH=\"/zap:$PATH\"\nENV ZAP_PATH=\"/zap/zap.sh\"\nENV HOME=\"/var/lib/jenkins\"\n#   Default port for use with zapcli\nENV ZAP_PORT=\"8080\"\nCOPY policies /var/lib/jenkins/.ZAP/policies/\nCOPY .xinitrc /var/lib/jenkins/\nWORKDIR /zap\n#   Download and expand the latest stable release \nRUN curl -s https://raw.githubusercontent.com/zaproxy/zap-admin/master/ZapVersions-dev.xml | xmlstarlet sel -t -v //url | grep -i Linux | wget -q --content-disposition -i - -O - | tar zx --strip-components=1 \\\n && curl -s -L https://bitbucket.org/meszarv/webswing/downloads/webswing-2.3-distribution.zip | jar -x \\\n && touch AcceptedLicense\nADD webswing.config /zap/webswing-2.3/webswing.config\nRUN chown -v -R root:root /zap \\\n && chown -v -R root:root /var/lib/jenkins \\\n && chmod -v -R 777 /var/lib/jenkins \\\n && chmod -v -R 777 /zap \\\n && chmod -v -R 777 /zap@tmp \\\n && chmod -v -R 1777 /tmp/.X11-unix \\\n && chown -v -R root:root /tmp/.X11-unix/\nWORKDIR /var/lib/jenkins\nENV OPENSHIFT_JENKINS_JVM_ARCH=\"x86_64\"\nUSER 1001\n","originalDockerfileUglifiedHash":"c7ca6605581a620fedcf4c7fda549ce9","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/efa9e7b62e04446870b7d7b66fb34f3f1e96ac17.dockerfile"}