{"seed":741118186,"processedDockerfileHash":"f7281028f3ecccce9be3131d63559b14","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM buildpack-deps:jessie\nRUN sed -i 's/archive.ubuntu.com/mirror.aarnet.edu.au\\/pub\\/ubuntu\\/archive/g' /etc/apt/sources.list\nRUN rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends libmicrohttpd-dev libjansson-dev libnice-dev libssl-dev libsrtp-dev libsofia-sip-ua-dev libglib2.0-dev libopus-dev libogg-dev libini-config-dev libcollection-dev libconfig-dev pkg-config gengetopt libtool automake build-essential subversion git cmake unzip zip lsof wget vim sudo rsync cron mysql-client openssh-server supervisor locate -y\n#   FFmpeg build section\nRUN mkdir ~/ffmpeg_sources\nRUN apt-get update \\\n && apt-get install --no-install-recommends autoconf automake build-essential libass-dev libfreetype6-dev libsdl1.2-dev libtheora-dev libtool libva-dev libvdpau-dev libvorbis-dev libxcb1-dev libxcb-shm0-dev libxcb-xfixes0-dev pkg-config texinfo zlib1g-dev -y\nRUN YASM=\"1.3.0\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://www.tortall.net/projects/yasm/releases/yasm-$YASM.tar.gz \\\n && tar xzvf yasm-$YASM.tar.gz \\\n && cd yasm-$YASM \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --bindir=\"$HOME/bin\" \\\n && make \\\n && make install \\\n && make distclean\nRUN VPX=\"1.5.0\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.5.0.tar.bz2 \\\n && tar xjvf libvpx-$VPX.tar.bz2 \\\n && cd libvpx-$VPX \\\n && PATH=\"$HOME/bin:$PATH\" ./configure --prefix=\"$HOME/ffmpeg_build\" --disable-examples --disable-unit-tests \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make clean\nRUN OPUS=\"1.3\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://downloads.xiph.org/releases/opus/opus-$OPUS.tar.gz \\\n && tar xzvf opus-$OPUS.tar.gz \\\n && cd opus-$OPUS \\\n && ./configure --help \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" \\\n && make \\\n && make install \\\n && make clean\nRUN LAME=\"3.100\" \\\n && apt-get install --no-install-recommends nasm -y \\\n && cd ~/ffmpeg_sources \\\n && wget http://downloads.sourceforge.net/project/lame/lame/$LAME/lame-$LAME.tar.gz \\\n && tar xzvf lame-$LAME.tar.gz \\\n && cd lame-$LAME \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --enable-nasm --disable-shared \\\n && make \\\n && make install\nRUN X264=\"20181001-2245-stable\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://download.videolan.org/pub/x264/snapshots/x264-snapshot-$X264.tar.bz2 \\\n && tar xjvf x264-snapshot-$X264.tar.bz2 \\\n && cd x264-snapshot-$X264 \\\n && PATH=\"$HOME/bin:$PATH\" ./configure --prefix=\"$HOME/ffmpeg_build\" --bindir=\"$HOME/bin\" --enable-static --disable-opencl --disable-asm \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make distclean\nRUN FDK_AAC=\"0.1.4\" \\\n && cd ~/ffmpeg_sources \\\n && wget -O fdk-aac.tar.gz https://github.com/mstorsjo/fdk-aac/archive/v$FDK_AAC.tar.gz \\\n && tar xzvf fdk-aac.tar.gz \\\n && cd fdk-aac-$FDK_AAC \\\n && autoreconf -fiv \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --disable-shared \\\n && make \\\n && make install \\\n && make distclean\nRUN FFMPEG_VER=\"n4.0.2\" \\\n && cd ~/ffmpeg_sources \\\n && wget https://github.com/FFmpeg/FFmpeg/archive/$FFMPEG_VER.zip \\\n && unzip $FFMPEG_VER.zip\nRUN FFMPEG_VER=\"n4.0.2\" \\\n && cd ~/ffmpeg_sources \\\n && cd FFmpeg-$FFMPEG_VER \\\n && PATH=\"$HOME/bin:$PATH\" PKG_CONFIG_PATH=\"$HOME/ffmpeg_build/lib/pkgconfig\" ./configure --prefix=\"$HOME/ffmpeg_build\" --pkg-config-flags=\"--static\" --extra-cflags=\"-I$HOME/ffmpeg_build/include\" --extra-ldflags=\"-L$HOME/ffmpeg_build/lib\" --bindir=\"$HOME/bin\" --enable-gpl --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-libxcb --enable-libpulse --enable-alsa \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make distclean \\\n && hash -r \\\n && mv ~/bin/ffmpeg /usr/local/bin/\n#   nginx-rtmp with openresty\nRUN ZLIB=\"zlib-1.2.11\" \\\n && vNGRTMP=\"v1.1.11\" \\\n && PCRE=\"8.41\" \\\n && nginx_build=/root/nginx \\\n && mkdir $nginx_build \\\n && cd $nginx_build \\\n && wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-$PCRE.tar.gz \\\n && tar -zxf pcre-$PCRE.tar.gz \\\n && cd pcre-$PCRE \\\n && ./configure \\\n && make \\\n && make install \\\n && cd $nginx_build \\\n && wget http://zlib.net/$ZLIB.tar.gz \\\n && tar -zxf $ZLIB.tar.gz \\\n && cd $ZLIB \\\n && ./configure \\\n && make \\\n && make install \\\n && cd $nginx_build \\\n && wget https://github.com/arut/nginx-rtmp-module/archive/$vNGRTMP.tar.gz \\\n && tar zxf $vNGRTMP.tar.gz \\\n && mv nginx-rtmp-module-* nginx-rtmp-module\nRUN OPENRESTY=\"1.13.6.1\" \\\n && ZLIB=\"zlib-1.2.11\" \\\n && PCRE=\"pcre-8.41\" \\\n && openresty_build=/root/openresty \\\n && mkdir $openresty_build \\\n && wget https://openresty.org/download/openresty-$OPENRESTY.tar.gz \\\n && tar zxf openresty-$OPENRESTY.tar.gz \\\n && cd openresty-$OPENRESTY \\\n && nginx_build=/root/nginx \\\n && ./configure --sbin-path=/usr/local/nginx/nginx --conf-path=/usr/local/nginx/nginx.conf --pid-path=/usr/local/nginx/nginx.pid --with-pcre-jit --with-ipv6 --with-pcre=$nginx_build/$PCRE --with-zlib=$nginx_build/$ZLIB --with-http_ssl_module --with-stream --with-mail=dynamic --add-module=$nginx_build/nginx-rtmp-module \\\n && make \\\n && make install \\\n && mv /usr/local/nginx/nginx /usr/local/bin\n#   Boringssl build section\n#   If you want to use the openssl instead of boringssl\n#   RUN apt-get update -y && apt-get install -y libssl-dev\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends g++ gcc libc6-dev make pkg-config -y \\\n && rm -rf /var/lib/apt/lists/*\nENV GOLANG_VERSION=\"1.7.5\"\nENV GOLANG_DOWNLOAD_URL=\"https://golang.org/dl/go$GOLANG_VERSION.linux-amd64.tar.gz\"\nENV GOLANG_DOWNLOAD_SHA256=\"2e4dd6c44f0693bef4e7b46cc701513d74c3cc44f2419bf519d7868b12931ac3\"\nRUN curl -fsSL \"$GOLANG_DOWNLOAD_URL\" -o golang.tar.gz \\\n && echo \"$GOLANG_DOWNLOAD_SHA256 golang.tar.gz\" | sha256sum -c - \\\n && tar -C /usr/local -xzf golang.tar.gz \\\n && rm golang.tar.gz\nENV GOPATH=\"/go\"\nENV PATH=\"$GOPATH/bin:/usr/local/go/bin:$PATH\"\nRUN mkdir -p \"$GOPATH/src\" \"$GOPATH/bin\" \\\n && chmod -R 777 \"$GOPATH\"\n#   https://boringssl.googlesource.com/boringssl/+/chromium-stable\nRUN git clone https://boringssl.googlesource.com/boringssl \\\n && cd boringssl \\\n && git reset --hard c7db3232c397aa3feb1d474d63a1c4dd674b6349 \\\n && sed -i s/\" -Werror\"//g CMakeLists.txt \\\n && mkdir -p build \\\n && cd build \\\n && cmake -DCMAKE_CXX_FLAGS=\"-lrt\" .. \\\n && make \\\n && cd .. \\\n && sudo mkdir -p /opt/boringssl \\\n && sudo cp -R include /opt/boringssl/ \\\n && sudo mkdir -p /opt/boringssl/lib \\\n && sudo cp build/ssl/libssl.a /opt/boringssl/lib/ \\\n && sudo cp build/crypto/libcrypto.a /opt/boringssl/lib/\nRUN LIBWEBSOCKET=\"3.1.0\" \\\n && wget https://github.com/warmcat/libwebsockets/archive/v$LIBWEBSOCKET.tar.gz \\\n && tar xzvf v$LIBWEBSOCKET.tar.gz \\\n && cd libwebsockets-$LIBWEBSOCKET \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_C_FLAGS=\"-fpic\" -DLWS_MAX_SMP=1 -DLWS_IPV6=\"ON\" .. \\\n && make \\\n && make install\nRUN SRTP=\"2.2.0\" \\\n && apt-get remove -y libsrtp0-dev \\\n && wget https://github.com/cisco/libsrtp/archive/v$SRTP.tar.gz \\\n && tar xfv v$SRTP.tar.gz \\\n && cd libsrtp-$SRTP \\\n && ./configure --prefix=/usr --enable-openssl \\\n && make shared_library \\\n && sudo make install\n#   8 March, 2019 1 commit 67807a17ce983a860804d7732aaf7d2fb56150ba\nRUN apt-get remove -y libnice-dev libnice10 \\\n && echo \"deb http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list \\\n && apt-get -o Acquire::Check-Valid-Until=false update \\\n && apt-get install --no-install-recommends gtk-doc-tools libgnutls28-dev jessie-backports -y -t \\\n && apt-get install --no-install-recommends libglib2.0-0 jessie-backports -y -t \\\n && git clone https://gitlab.freedesktop.org/libnice/libnice.git \\\n && cd libnice \\\n && git checkout 67807a17ce983a860804d7732aaf7d2fb56150ba \\\n && bash autogen.sh \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install\nRUN COTURN=\"4.5.0.8\" \\\n && wget https://github.com/coturn/coturn/archive/$COTURN.tar.gz \\\n && tar xzvf $COTURN.tar.gz \\\n && cd coturn-$COTURN \\\n && ./configure \\\n && make \\\n && make install\n#   RUN GDB=\"8.0\" && wget ftp://sourceware.org/pub/gdb/releases/gdb-$GDB.tar.gz && \\\n#       tar xzvf gdb-$GDB.tar.gz && \\\n#       cd gdb-$GDB && \\\n#       ./configure && \\\n#       make && \\\n#       make install\n#   ./configure CFLAGS=\"-fsanitize=address -fno-omit-frame-pointer\" LDFLAGS=\"-lasan\"\n#   datachannel build\nRUN cd / \\\n && git clone https://github.com/sctplab/usrsctp.git \\\n && cd /usrsctp \\\n && git checkout origin/master \\\n && git reset --hard 1c9c82fbe3582ed7c474ba4326e5929d12584005 \\\n && ./bootstrap \\\n && ./configure \\\n && make \\\n && make install\n#   tag v0.6.2 https://github.com/meetecho/janus-gateway/commit/ddbf37fef43ade61d73173c7661a2449c13582d4\nRUN cd / \\\n && git clone https://github.com/meetecho/janus-gateway.git \\\n && cd /janus-gateway \\\n && sh autogen.sh \\\n && git checkout origin/master \\\n && git reset --hard ddbf37fef43ade61d73173c7661a2449c13582d4 \\\n && PKG_CONFIG_PATH=\"$HOME/ffmpeg_build/lib/pkgconfig\" ./configure --enable-post-processing --enable-boringssl --enable-data-channels --disable-rabbitmq --disable-mqtt --disable-unix-sockets --enable-dtls-settimeout --enable-plugin-echotest --enable-plugin-recordplay --enable-plugin-sip --enable-plugin-videocall --enable-plugin-voicemail --enable-plugin-textroom --enable-plugin-audiobridge --enable-plugin-nosip --enable-all-handlers \\\n && make \\\n && make install \\\n && make configs \\\n && ldconfig\nCOPY nginx.conf /usr/local/nginx/nginx.conf\nCMD nginx \\\n && janus\n#   RUN apt-get -y install iperf iperf3\n#   RUN git clone https://github.com/HewlettPackard/netperf.git && \\\n#       cd netperf && \\\n#       bash autogen.sh && \\\n#       ./configure && \\\n#       make && \\\n#       make install \nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM buildpack-deps:jessie\nRUN sed -i 's/archive.ubuntu.com/mirror.aarnet.edu.au\\/pub\\/ubuntu\\/archive/g' /etc/apt/sources.list\nRUN rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y \\\n && apt-get install libmicrohttpd-dev libjansson-dev libnice-dev libssl-dev libsrtp-dev libsofia-sip-ua-dev libglib2.0-dev libopus-dev libogg-dev libini-config-dev libcollection-dev libconfig-dev pkg-config gengetopt libtool automake build-essential subversion git cmake unzip zip lsof wget vim sudo rsync cron mysql-client openssh-server supervisor locate -y\n#  FFmpeg build section\nRUN mkdir ~/ffmpeg_sources\nRUN apt-get update \\\n && apt-get install autoconf automake build-essential libass-dev libfreetype6-dev libsdl1.2-dev libtheora-dev libtool libva-dev libvdpau-dev libvorbis-dev libxcb1-dev libxcb-shm0-dev libxcb-xfixes0-dev pkg-config texinfo zlib1g-dev -y\nRUN YASM=\"1.3.0\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://www.tortall.net/projects/yasm/releases/yasm-$YASM.tar.gz \\\n && tar xzvf yasm-$YASM.tar.gz \\\n && cd yasm-$YASM \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --bindir=\"$HOME/bin\" \\\n && make \\\n && make install \\\n && make distclean\nRUN VPX=\"1.5.0\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.5.0.tar.bz2 \\\n && tar xjvf libvpx-$VPX.tar.bz2 \\\n && cd libvpx-$VPX \\\n && PATH=\"$HOME/bin:$PATH\" ./configure --prefix=\"$HOME/ffmpeg_build\" --disable-examples --disable-unit-tests \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make clean\nRUN OPUS=\"1.3\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://downloads.xiph.org/releases/opus/opus-$OPUS.tar.gz \\\n && tar xzvf opus-$OPUS.tar.gz \\\n && cd opus-$OPUS \\\n && ./configure --help \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" \\\n && make \\\n && make install \\\n && make clean\nRUN LAME=\"3.100\" \\\n && apt-get install nasm -y \\\n && cd ~/ffmpeg_sources \\\n && wget http://downloads.sourceforge.net/project/lame/lame/$LAME/lame-$LAME.tar.gz \\\n && tar xzvf lame-$LAME.tar.gz \\\n && cd lame-$LAME \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --enable-nasm --disable-shared \\\n && make \\\n && make install\nRUN X264=\"20181001-2245-stable\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://download.videolan.org/pub/x264/snapshots/x264-snapshot-$X264.tar.bz2 \\\n && tar xjvf x264-snapshot-$X264.tar.bz2 \\\n && cd x264-snapshot-$X264 \\\n && PATH=\"$HOME/bin:$PATH\" ./configure --prefix=\"$HOME/ffmpeg_build\" --bindir=\"$HOME/bin\" --enable-static --disable-opencl --disable-asm \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make distclean\nRUN FDK_AAC=\"0.1.4\" \\\n && cd ~/ffmpeg_sources \\\n && wget -O fdk-aac.tar.gz https://github.com/mstorsjo/fdk-aac/archive/v$FDK_AAC.tar.gz \\\n && tar xzvf fdk-aac.tar.gz \\\n && cd fdk-aac-$FDK_AAC \\\n && autoreconf -fiv \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --disable-shared \\\n && make \\\n && make install \\\n && make distclean\nRUN FFMPEG_VER=\"n4.0.2\" \\\n && cd ~/ffmpeg_sources \\\n && wget https://github.com/FFmpeg/FFmpeg/archive/$FFMPEG_VER.zip \\\n && unzip $FFMPEG_VER.zip\nRUN FFMPEG_VER=\"n4.0.2\" \\\n && cd ~/ffmpeg_sources \\\n && cd FFmpeg-$FFMPEG_VER \\\n && PATH=\"$HOME/bin:$PATH\" PKG_CONFIG_PATH=\"$HOME/ffmpeg_build/lib/pkgconfig\" ./configure --prefix=\"$HOME/ffmpeg_build\" --pkg-config-flags=\"--static\" --extra-cflags=\"-I$HOME/ffmpeg_build/include\" --extra-ldflags=\"-L$HOME/ffmpeg_build/lib\" --bindir=\"$HOME/bin\" --enable-gpl --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-libxcb --enable-libpulse --enable-alsa \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make distclean \\\n && hash -r \\\n && mv ~/bin/ffmpeg /usr/local/bin/\n#  nginx-rtmp with openresty\nRUN ZLIB=\"zlib-1.2.11\" \\\n && vNGRTMP=\"v1.1.11\" \\\n && PCRE=\"8.41\" \\\n && nginx_build=/root/nginx \\\n && mkdir $nginx_build \\\n && cd $nginx_build \\\n && wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-$PCRE.tar.gz \\\n && tar -zxf pcre-$PCRE.tar.gz \\\n && cd pcre-$PCRE \\\n && ./configure \\\n && make \\\n && make install \\\n && cd $nginx_build \\\n && wget http://zlib.net/$ZLIB.tar.gz \\\n && tar -zxf $ZLIB.tar.gz \\\n && cd $ZLIB \\\n && ./configure \\\n && make \\\n && make install \\\n && cd $nginx_build \\\n && wget https://github.com/arut/nginx-rtmp-module/archive/$vNGRTMP.tar.gz \\\n && tar zxf $vNGRTMP.tar.gz \\\n && mv nginx-rtmp-module-* nginx-rtmp-module\nRUN OPENRESTY=\"1.13.6.1\" \\\n && ZLIB=\"zlib-1.2.11\" \\\n && PCRE=\"pcre-8.41\" \\\n && openresty_build=/root/openresty \\\n && mkdir $openresty_build \\\n && wget https://openresty.org/download/openresty-$OPENRESTY.tar.gz \\\n && tar zxf openresty-$OPENRESTY.tar.gz \\\n && cd openresty-$OPENRESTY \\\n && nginx_build=/root/nginx \\\n && ./configure --sbin-path=/usr/local/nginx/nginx --conf-path=/usr/local/nginx/nginx.conf --pid-path=/usr/local/nginx/nginx.pid --with-pcre-jit --with-ipv6 --with-pcre=$nginx_build/$PCRE --with-zlib=$nginx_build/$ZLIB --with-http_ssl_module --with-stream --with-mail=dynamic --add-module=$nginx_build/nginx-rtmp-module \\\n && make \\\n && make install \\\n && mv /usr/local/nginx/nginx /usr/local/bin\n#  Boringssl build section\n#  If you want to use the openssl instead of boringssl\n#  RUN apt-get update -y && apt-get install -y libssl-dev\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends g++ gcc libc6-dev make pkg-config -y \\\n && rm -rf /var/lib/apt/lists/*\nENV GOLANG_VERSION=\"1.7.5\"\nENV GOLANG_DOWNLOAD_URL=\"https://golang.org/dl/go$GOLANG_VERSION.linux-amd64.tar.gz\"\nENV GOLANG_DOWNLOAD_SHA256=\"2e4dd6c44f0693bef4e7b46cc701513d74c3cc44f2419bf519d7868b12931ac3\"\nRUN curl -fsSL \"$GOLANG_DOWNLOAD_URL\" -o golang.tar.gz \\\n && echo \"$GOLANG_DOWNLOAD_SHA256 golang.tar.gz\" | sha256sum -c - \\\n && tar -C /usr/local -xzf golang.tar.gz \\\n && rm golang.tar.gz\nENV GOPATH=\"/go\"\nENV PATH=\"$GOPATH/bin:/usr/local/go/bin:$PATH\"\nRUN mkdir -p \"$GOPATH/src\" \"$GOPATH/bin\" \\\n && chmod -R 777 \"$GOPATH\"\n#  https://boringssl.googlesource.com/boringssl/+/chromium-stable\nRUN git clone https://boringssl.googlesource.com/boringssl \\\n && cd boringssl \\\n && git reset --hard c7db3232c397aa3feb1d474d63a1c4dd674b6349 \\\n && sed -i s/\" -Werror\"//g CMakeLists.txt \\\n && mkdir -p build \\\n && cd build \\\n && cmake -DCMAKE_CXX_FLAGS=\"-lrt\" .. \\\n && make \\\n && cd .. \\\n && sudo mkdir -p /opt/boringssl \\\n && sudo cp -R include /opt/boringssl/ \\\n && sudo mkdir -p /opt/boringssl/lib \\\n && sudo cp build/ssl/libssl.a /opt/boringssl/lib/ \\\n && sudo cp build/crypto/libcrypto.a /opt/boringssl/lib/\nRUN LIBWEBSOCKET=\"3.1.0\" \\\n && wget https://github.com/warmcat/libwebsockets/archive/v$LIBWEBSOCKET.tar.gz \\\n && tar xzvf v$LIBWEBSOCKET.tar.gz \\\n && cd libwebsockets-$LIBWEBSOCKET \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_C_FLAGS=\"-fpic\" -DLWS_MAX_SMP=1 -DLWS_IPV6=\"ON\" .. \\\n && make \\\n && make install\nRUN SRTP=\"2.2.0\" \\\n && apt-get remove -y libsrtp0-dev \\\n && wget https://github.com/cisco/libsrtp/archive/v$SRTP.tar.gz \\\n && tar xfv v$SRTP.tar.gz \\\n && cd libsrtp-$SRTP \\\n && ./configure --prefix=/usr --enable-openssl \\\n && make shared_library \\\n && sudo make install\n#  8 March, 2019 1 commit 67807a17ce983a860804d7732aaf7d2fb56150ba\nRUN apt-get remove -y libnice-dev libnice10 \\\n && echo \"deb http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list \\\n && apt-get -o Acquire::Check-Valid-Until=false update \\\n && apt-get install gtk-doc-tools libgnutls28-dev jessie-backports -y -t \\\n && apt-get install libglib2.0-0 jessie-backports -y -t \\\n && git clone https://gitlab.freedesktop.org/libnice/libnice.git \\\n && cd libnice \\\n && git checkout 67807a17ce983a860804d7732aaf7d2fb56150ba \\\n && bash autogen.sh \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install\nRUN COTURN=\"4.5.0.8\" \\\n && wget https://github.com/coturn/coturn/archive/$COTURN.tar.gz \\\n && tar xzvf $COTURN.tar.gz \\\n && cd coturn-$COTURN \\\n && ./configure \\\n && make \\\n && make install\n#  RUN GDB=\"8.0\" && wget ftp://sourceware.org/pub/gdb/releases/gdb-$GDB.tar.gz && \\\n#      tar xzvf gdb-$GDB.tar.gz && \\\n#      cd gdb-$GDB && \\\n#      ./configure && \\\n#      make && \\\n#      make install\n#  ./configure CFLAGS=\"-fsanitize=address -fno-omit-frame-pointer\" LDFLAGS=\"-lasan\"\n#  datachannel build\nRUN cd / \\\n && git clone https://github.com/sctplab/usrsctp.git \\\n && cd /usrsctp \\\n && git checkout origin/master \\\n && git reset --hard 1c9c82fbe3582ed7c474ba4326e5929d12584005 \\\n && ./bootstrap \\\n && ./configure \\\n && make \\\n && make install\n#  tag v0.6.2 https://github.com/meetecho/janus-gateway/commit/ddbf37fef43ade61d73173c7661a2449c13582d4\nRUN cd / \\\n && git clone https://github.com/meetecho/janus-gateway.git \\\n && cd /janus-gateway \\\n && sh autogen.sh \\\n && git checkout origin/master \\\n && git reset --hard ddbf37fef43ade61d73173c7661a2449c13582d4 \\\n && PKG_CONFIG_PATH=\"$HOME/ffmpeg_build/lib/pkgconfig\" ./configure --enable-post-processing --enable-boringssl --enable-data-channels --disable-rabbitmq --disable-mqtt --disable-unix-sockets --enable-dtls-settimeout --enable-plugin-echotest --enable-plugin-recordplay --enable-plugin-sip --enable-plugin-videocall --enable-plugin-voicemail --enable-plugin-textroom --enable-plugin-audiobridge --enable-plugin-nosip --enable-all-handlers \\\n && make \\\n && make install \\\n && make configs \\\n && ldconfig\nCOPY nginx.conf /usr/local/nginx/nginx.conf\nCMD nginx \\\n && janus\n#  RUN apt-get -y install iperf iperf3\n#  RUN git clone https://github.com/HewlettPackard/netperf.git && \\\n#      cd netperf && \\\n#      bash autogen.sh && \\\n#      ./configure && \\\n#      make && \\\n#      make install \n","injectedSmells":[],"originalDockerfileHash":"63e2aae4263b026d4596ca222c2c90ea","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM buildpack-deps:jessie\nRUN sed -i 's/archive.ubuntu.com/mirror.aarnet.edu.au\\/pub\\/ubuntu\\/archive/g' /etc/apt/sources.list\nRUN rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y \\\n && apt-get install libmicrohttpd-dev libjansson-dev libnice-dev libssl-dev libsrtp-dev libsofia-sip-ua-dev libglib2.0-dev libopus-dev libogg-dev libini-config-dev libcollection-dev libconfig-dev pkg-config gengetopt libtool automake build-essential subversion git cmake unzip zip lsof wget vim sudo rsync cron mysql-client openssh-server supervisor locate -y\n#   FFmpeg build section\nRUN mkdir ~/ffmpeg_sources\nRUN apt-get update \\\n && apt-get install autoconf automake build-essential libass-dev libfreetype6-dev libsdl1.2-dev libtheora-dev libtool libva-dev libvdpau-dev libvorbis-dev libxcb1-dev libxcb-shm0-dev libxcb-xfixes0-dev pkg-config texinfo zlib1g-dev -y\nRUN YASM=\"1.3.0\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://www.tortall.net/projects/yasm/releases/yasm-$YASM.tar.gz \\\n && tar xzvf yasm-$YASM.tar.gz \\\n && cd yasm-$YASM \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --bindir=\"$HOME/bin\" \\\n && make \\\n && make install \\\n && make distclean\nRUN VPX=\"1.5.0\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.5.0.tar.bz2 \\\n && tar xjvf libvpx-$VPX.tar.bz2 \\\n && cd libvpx-$VPX \\\n && PATH=\"$HOME/bin:$PATH\" ./configure --prefix=\"$HOME/ffmpeg_build\" --disable-examples --disable-unit-tests \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make clean\nRUN OPUS=\"1.3\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://downloads.xiph.org/releases/opus/opus-$OPUS.tar.gz \\\n && tar xzvf opus-$OPUS.tar.gz \\\n && cd opus-$OPUS \\\n && ./configure --help \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" \\\n && make \\\n && make install \\\n && make clean\nRUN LAME=\"3.100\" \\\n && apt-get install nasm -y \\\n && cd ~/ffmpeg_sources \\\n && wget http://downloads.sourceforge.net/project/lame/lame/$LAME/lame-$LAME.tar.gz \\\n && tar xzvf lame-$LAME.tar.gz \\\n && cd lame-$LAME \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --enable-nasm --disable-shared \\\n && make \\\n && make install\nRUN X264=\"20181001-2245-stable\" \\\n && cd ~/ffmpeg_sources \\\n && wget http://download.videolan.org/pub/x264/snapshots/x264-snapshot-$X264.tar.bz2 \\\n && tar xjvf x264-snapshot-$X264.tar.bz2 \\\n && cd x264-snapshot-$X264 \\\n && PATH=\"$HOME/bin:$PATH\" ./configure --prefix=\"$HOME/ffmpeg_build\" --bindir=\"$HOME/bin\" --enable-static --disable-opencl --disable-asm \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make distclean\nRUN FDK_AAC=\"0.1.4\" \\\n && cd ~/ffmpeg_sources \\\n && wget -O fdk-aac.tar.gz https://github.com/mstorsjo/fdk-aac/archive/v$FDK_AAC.tar.gz \\\n && tar xzvf fdk-aac.tar.gz \\\n && cd fdk-aac-$FDK_AAC \\\n && autoreconf -fiv \\\n && ./configure --prefix=\"$HOME/ffmpeg_build\" --disable-shared \\\n && make \\\n && make install \\\n && make distclean\nRUN FFMPEG_VER=\"n4.0.2\" \\\n && cd ~/ffmpeg_sources \\\n && wget https://github.com/FFmpeg/FFmpeg/archive/$FFMPEG_VER.zip \\\n && unzip $FFMPEG_VER.zip\nRUN FFMPEG_VER=\"n4.0.2\" \\\n && cd ~/ffmpeg_sources \\\n && cd FFmpeg-$FFMPEG_VER \\\n && PATH=\"$HOME/bin:$PATH\" PKG_CONFIG_PATH=\"$HOME/ffmpeg_build/lib/pkgconfig\" ./configure --prefix=\"$HOME/ffmpeg_build\" --pkg-config-flags=\"--static\" --extra-cflags=\"-I$HOME/ffmpeg_build/include\" --extra-ldflags=\"-L$HOME/ffmpeg_build/lib\" --bindir=\"$HOME/bin\" --enable-gpl --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-libxcb --enable-libpulse --enable-alsa \\\n && PATH=\"$HOME/bin:$PATH\" make \\\n && make install \\\n && make distclean \\\n && hash -r \\\n && mv ~/bin/ffmpeg /usr/local/bin/\n#   nginx-rtmp with openresty\nRUN ZLIB=\"zlib-1.2.11\" \\\n && vNGRTMP=\"v1.1.11\" \\\n && PCRE=\"8.41\" \\\n && nginx_build=/root/nginx \\\n && mkdir $nginx_build \\\n && cd $nginx_build \\\n && wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-$PCRE.tar.gz \\\n && tar -zxf pcre-$PCRE.tar.gz \\\n && cd pcre-$PCRE \\\n && ./configure \\\n && make \\\n && make install \\\n && cd $nginx_build \\\n && wget http://zlib.net/$ZLIB.tar.gz \\\n && tar -zxf $ZLIB.tar.gz \\\n && cd $ZLIB \\\n && ./configure \\\n && make \\\n && make install \\\n && cd $nginx_build \\\n && wget https://github.com/arut/nginx-rtmp-module/archive/$vNGRTMP.tar.gz \\\n && tar zxf $vNGRTMP.tar.gz \\\n && mv nginx-rtmp-module-* nginx-rtmp-module\nRUN OPENRESTY=\"1.13.6.1\" \\\n && ZLIB=\"zlib-1.2.11\" \\\n && PCRE=\"pcre-8.41\" \\\n && openresty_build=/root/openresty \\\n && mkdir $openresty_build \\\n && wget https://openresty.org/download/openresty-$OPENRESTY.tar.gz \\\n && tar zxf openresty-$OPENRESTY.tar.gz \\\n && cd openresty-$OPENRESTY \\\n && nginx_build=/root/nginx \\\n && ./configure --sbin-path=/usr/local/nginx/nginx --conf-path=/usr/local/nginx/nginx.conf --pid-path=/usr/local/nginx/nginx.pid --with-pcre-jit --with-ipv6 --with-pcre=$nginx_build/$PCRE --with-zlib=$nginx_build/$ZLIB --with-http_ssl_module --with-stream --with-mail=dynamic --add-module=$nginx_build/nginx-rtmp-module \\\n && make \\\n && make install \\\n && mv /usr/local/nginx/nginx /usr/local/bin\n#   Boringssl build section\n#   If you want to use the openssl instead of boringssl\n#   RUN apt-get update -y && apt-get install -y libssl-dev\nRUN apt-get update -y \\\n && apt-get install --no-install-recommends g++ gcc libc6-dev make pkg-config -y \\\n && rm -rf /var/lib/apt/lists/*\nENV GOLANG_VERSION=\"1.7.5\"\nENV GOLANG_DOWNLOAD_URL=\"https://golang.org/dl/go$GOLANG_VERSION.linux-amd64.tar.gz\"\nENV GOLANG_DOWNLOAD_SHA256=\"2e4dd6c44f0693bef4e7b46cc701513d74c3cc44f2419bf519d7868b12931ac3\"\nRUN curl -fsSL \"$GOLANG_DOWNLOAD_URL\" -o golang.tar.gz \\\n && echo \"$GOLANG_DOWNLOAD_SHA256 golang.tar.gz\" | sha256sum -c - \\\n && tar -C /usr/local -xzf golang.tar.gz \\\n && rm golang.tar.gz\nENV GOPATH=\"/go\"\nENV PATH=\"$GOPATH/bin:/usr/local/go/bin:$PATH\"\nRUN mkdir -p \"$GOPATH/src\" \"$GOPATH/bin\" \\\n && chmod -R 777 \"$GOPATH\"\n#   https://boringssl.googlesource.com/boringssl/+/chromium-stable\nRUN git clone https://boringssl.googlesource.com/boringssl \\\n && cd boringssl \\\n && git reset --hard c7db3232c397aa3feb1d474d63a1c4dd674b6349 \\\n && sed -i s/\" -Werror\"//g CMakeLists.txt \\\n && mkdir -p build \\\n && cd build \\\n && cmake -DCMAKE_CXX_FLAGS=\"-lrt\" .. \\\n && make \\\n && cd .. \\\n && sudo mkdir -p /opt/boringssl \\\n && sudo cp -R include /opt/boringssl/ \\\n && sudo mkdir -p /opt/boringssl/lib \\\n && sudo cp build/ssl/libssl.a /opt/boringssl/lib/ \\\n && sudo cp build/crypto/libcrypto.a /opt/boringssl/lib/\nRUN LIBWEBSOCKET=\"3.1.0\" \\\n && wget https://github.com/warmcat/libwebsockets/archive/v$LIBWEBSOCKET.tar.gz \\\n && tar xzvf v$LIBWEBSOCKET.tar.gz \\\n && cd libwebsockets-$LIBWEBSOCKET \\\n && mkdir build \\\n && cd build \\\n && cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_C_FLAGS=\"-fpic\" -DLWS_MAX_SMP=1 -DLWS_IPV6=\"ON\" .. \\\n && make \\\n && make install\nRUN SRTP=\"2.2.0\" \\\n && apt-get remove -y libsrtp0-dev \\\n && wget https://github.com/cisco/libsrtp/archive/v$SRTP.tar.gz \\\n && tar xfv v$SRTP.tar.gz \\\n && cd libsrtp-$SRTP \\\n && ./configure --prefix=/usr --enable-openssl \\\n && make shared_library \\\n && sudo make install\n#   8 March, 2019 1 commit 67807a17ce983a860804d7732aaf7d2fb56150ba\nRUN apt-get remove -y libnice-dev libnice10 \\\n && echo \"deb http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list \\\n && apt-get -o Acquire::Check-Valid-Until=false update \\\n && apt-get install gtk-doc-tools libgnutls28-dev jessie-backports -y -t \\\n && apt-get install libglib2.0-0 jessie-backports -y -t \\\n && git clone https://gitlab.freedesktop.org/libnice/libnice.git \\\n && cd libnice \\\n && git checkout 67807a17ce983a860804d7732aaf7d2fb56150ba \\\n && bash autogen.sh \\\n && ./configure --prefix=/usr \\\n && make \\\n && make install\nRUN COTURN=\"4.5.0.8\" \\\n && wget https://github.com/coturn/coturn/archive/$COTURN.tar.gz \\\n && tar xzvf $COTURN.tar.gz \\\n && cd coturn-$COTURN \\\n && ./configure \\\n && make \\\n && make install\n#   RUN GDB=\"8.0\" && wget ftp://sourceware.org/pub/gdb/releases/gdb-$GDB.tar.gz && \\\n#       tar xzvf gdb-$GDB.tar.gz && \\\n#       cd gdb-$GDB && \\\n#       ./configure && \\\n#       make && \\\n#       make install\n#   ./configure CFLAGS=\"-fsanitize=address -fno-omit-frame-pointer\" LDFLAGS=\"-lasan\"\n#   datachannel build\nRUN cd / \\\n && git clone https://github.com/sctplab/usrsctp.git \\\n && cd /usrsctp \\\n && git checkout origin/master \\\n && git reset --hard 1c9c82fbe3582ed7c474ba4326e5929d12584005 \\\n && ./bootstrap \\\n && ./configure \\\n && make \\\n && make install\n#   tag v0.6.2 https://github.com/meetecho/janus-gateway/commit/ddbf37fef43ade61d73173c7661a2449c13582d4\nRUN cd / \\\n && git clone https://github.com/meetecho/janus-gateway.git \\\n && cd /janus-gateway \\\n && sh autogen.sh \\\n && git checkout origin/master \\\n && git reset --hard ddbf37fef43ade61d73173c7661a2449c13582d4 \\\n && PKG_CONFIG_PATH=\"$HOME/ffmpeg_build/lib/pkgconfig\" ./configure --enable-post-processing --enable-boringssl --enable-data-channels --disable-rabbitmq --disable-mqtt --disable-unix-sockets --enable-dtls-settimeout --enable-plugin-echotest --enable-plugin-recordplay --enable-plugin-sip --enable-plugin-videocall --enable-plugin-voicemail --enable-plugin-textroom --enable-plugin-audiobridge --enable-plugin-nosip --enable-all-handlers \\\n && make \\\n && make install \\\n && make configs \\\n && ldconfig\nCOPY nginx.conf /usr/local/nginx/nginx.conf\nCMD nginx \\\n && janus\n#   RUN apt-get -y install iperf iperf3\n#   RUN git clone https://github.com/HewlettPackard/netperf.git && \\\n#       cd netperf && \\\n#       bash autogen.sh && \\\n#       ./configure && \\\n#       make && \\\n#       make install \n","originalDockerfileUglifiedHash":"f7b14aff18733827f0a3dfc35517492c","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/f752c31eda8ddc1f68e3ad086ad3871c2309bce5.dockerfile"}