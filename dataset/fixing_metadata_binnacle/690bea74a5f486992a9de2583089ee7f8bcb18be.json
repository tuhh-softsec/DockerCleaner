{"seed":1904891645,"processedDockerfileHash":"f77e1bd2c5d40f8c9f66fab79fdd2d6a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-pip","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM nvidia/opengl:1.0-glvnd-runtime-ubuntu16.04\nLABEL maintainer=\"\\\"Samir Tabriz\\\"\"\nENV NVIDIA_DRIVER_CAPABILITIES=\"${NVIDIA_DRIVER_CAPABILITIES},display,compute,utility\"\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends mesa-utils -y ) \\\n && rm -rf /var/lib/apt/lists/*\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends ocl-icd-libopencl1 clinfo -y ) \\\n && rm -rf /var/lib/apt/lists/*\nRUN mkdir -p /etc/OpenCL/vendors \\\n && echo \"libnvidia-opencl.so.1\" > /etc/OpenCL/vendors/nvidia.icd\nENV NVIDIA_VISIBLE_DEVICES=\"all\"\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && echo keyboard-configuration keyboard-configuration/layout select 'English (US)' | debconf-set-selections \\\n && echo keyboard-configuration keyboard-configuration/layoutcode select 'us' | debconf-set-selections \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends software-properties-common wget udev apt-utils sudo -y )\nRUN add-apt-repository -y ppa:danielrichter2007/grub-customizer \\\n && wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | apt-key add - \\\n && (apt-get update ;apt-get install --no-install-recommends apt-transport-https -y ) \\\n && echo \"deb https://download.sublimetext.com/ apt/stable/\" | tee /etc/apt/sources.list.d/sublime-text.list \\\n && apt-add-repository -y ppa:obsproject/obs-studio \\\n && apt-add-repository -y ppa:graphics-drivers/ppa \\\n && add-apt-repository -y ppa:yannubuntu/boot-repair \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends sublime-text grub-customizer exfat-fuse exfat-utils vim terminator gitg cmake-curses-gui gparted meld cowsay fortune gimp synaptic libgoogle-glog-dev libatlas-base-dev libeigen3-dev libsuitesparse-dev ncdu filezilla p7zip-full openssh-client openssh-server boot-repair -y )\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' \\\n && apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 \\\n && apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends ros-kinetic-desktop-full python-rosinstall -y ) \\\n && rosdep init \\\n && rosdep update\nRUN /bin/bash -c \"echo 'source /opt/ros/kinetic/setup.bash' >> /root/.bashrc \\\n && source /root/.bashrc\"\nRUN add-apt-repository -y ppa:levi-armstrong/ppa \\\n && :\nRUN /bin/bash -c \"source /opt/ros/kinetic/setup.bash \\\n && cd \\\n && mkdir -p workspace/ros/src \\\n && cd workspace/ros \\\n && catkin_make\"\nRUN /bin/bash -c \"echo 'source /root/workspace/ros/devel/setup.bash' >> /root/.bashrc\"\nRUN cd ~/workspace/ros \\\n && (apt-get update ;apt-get install --no-install-recommends ocl-icd-opencl-dev -y ) \\\n && wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run -O cuda.run \\\n && chmod +x cuda.run \\\n && ./cuda.run -silent --toolkit --samples --samplespath=\"/root/workspace/\" \\\n && wget \"https://www.dropbox.com/s/cx95583vbf1ifzm/cudnn-8.0-linux-x64-v5.1.tgz?dl%3D0&sa=D&ust=1507541105896000&usg=AFQjCNEU511fT00n547PxPt_P6cfSLPVWw\" \\\n && tar -zxvf cudnn* \\\n && cp cuda/include/* /usr/local/cuda/include \\\n && cp cuda/lib64/* /usr/local/cuda/lib64/ \\\n && echo 'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64' >> ~/.bashrc \\\n && echo 'export PATH=$PATH:/usr/local/cuda/bin' >> ~/.bashrc\nRUN (apt-get update ;apt-get install --no-install-recommends cmake libgoogle-glog-dev libatlas-base-dev libeigen3-dev libsuitesparse-dev -y --force-yes ) \\\n && mkdir /tmp/ceres_install \\\n && cd /tmp/ceres_install \\\n && git clone https://ceres-solver.googlesource.com/ceres-solver \\\n && cd ceres-solver \\\n && git fetch --tags \\\n && git checkout tags/1.9.0 \\\n && cd .. \\\n && mkdir ceres-bin \\\n && cd ceres-bin \\\n && cmake ../ceres-solver \\\n && make -j8 \\\n && make test \\\n && make install \\\n && rm -R /tmp/ceres_install \\\n && cd ~/workspace/ros/src \\\n && git clone https://github.com/iaslab-unipd/calibration_toolkit \\\n && cd calibration_toolkit \\\n && git fetch origin --tags \\\n && git checkout tags/v0.2\nRUN cd \\\n && cd workspace \\\n && : \\\n && git clone https://github.com/marketto89/opencv \\\n && cd opencv \\\n && git checkout 3.1.0-with-cuda8 \\\n && mkdir release \\\n && cd release \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local/opencv3 -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON -D ENABLE_FAST_MATH=1 -D CUDA_FAST_MATH=1 -D WITH_CUBLAS=1 -D WITH_IPP=ON -D CMAKE_LIBRARY_PATH=/usr/local/cuda/lib64/stubs .. \\\n && make -j8 -l8 \\\n && make install \\\n && printf '#OpenCV\\nPKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/opencv3/lib/pkgconfig\\nexport PKG_CONFIG_PATH\\n' >> /root/.bashrc \\\n && printf 'PATH=$PATH:/usr/local/opencv3/bin\\nexport PATH\\n' >> /root/.bashrc \\\n && printf 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/opencv3/lib\\nexport LD_LIBRARY_PATH\\n' >> /root/.bashrc \\\n && /bin/bash -c \"source /root/.bashrc\" \\\n && ln -s /usr/local/opencv3/share/OpenCV/3rdparty/lib/libippicv.a /usr/local/lib/libippicv.a\nRUN /bin/bash -c \"source /root/.bashrc \\\n && cd ~/workspace/ros/src \\\n && git clone https://bitbucket.org/mcarraro/rtpose_wrapper \\\n && cd rtpose_wrapper \\\n && git checkout integration-1604 \\\n && apt-get --assume-yes install libprotobuf-dev libleveldb-dev libsnappy-dev libhdf5-serial-dev protobuf-compiler libboost-all-dev libgflags-dev libgoogle-glog-dev liblmdb-dev \\\n && make all -j8\"\nRUN cd \\\n && cd workspace \\\n && git clone https://github.com/OpenPTrack/libfreenect2.git \\\n && cd libfreenect2 \\\n && git checkout 1606 \\\n && cd depends/ \\\n && (apt-get update ;apt-get install --no-install-recommends git cmake cmake-curses-gui libxmu-dev libxi-dev libgl1-mesa-dev xorg-dev libglu1-mesa-dev libtool automake libudev-dev libgtk2.0-dev pkg-config libjpeg-turbo8-dev libturbojpeg libglewmx-dev -y ) \\\n && ln -f -s /usr/lib/x86_64-linux-gnu/libturbojpeg.so.0.1.0 /usr/lib/x86_64-linux-gnu/libturbojpeg.so \\\n && cd .. \\\n && mkdir build \\\n && cd build \\\n && /bin/bash -c \"source /opt/ros/kinetic/setup.bash \\\n && export NVCUDASAMPLES_ROOT='/root/workspace/NVIDIA_CUDA-8.0_Samples' \\\n && cmake .. -DENABLE_CXX11=ON -DCUDA_PROPAGATE_HOST_FLAGS=off \\\n && make \\\n && make install\" \\\n && echo '# ATTR{product}==\"Kinect2\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02c4\", MODE=\"0666\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02d8\", MODE=\"0666\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02d9\", MODE=\"0666\"' > ~/90-kinect2.rules \\\n && cp ~/90-kinect2.rules /etc/udev/rules.d/\nRUN cd ~/workspace/ros/src \\\n && git clone https://github.com/OpenPTrack/iai_kinect2.git \\\n && cd iai_kinect2 \\\n && git checkout 1607\nRUN /bin/bash -c \"git clone https://github.com/torch/distro.git ~/torch --recursive \\\n && cd ~/torch \\\n && bash install-deps \\\n && ./install.sh -b \\\n && source ~/.bashrc \\\n && cd install/bin \\\n && ./luarocks install dpnn \\\n && ./luarocks install csvigo\"\nRUN /bin/bash -c \"cd /tmp \\\n && git clone https://github.com/cmusatyalab/openface.git \\\n && cd openface \\\n && sudo python setup.py install\"\nRUN /bin/bash -c \"cd /tmp \\\n && rm -rf dlib \\\n && git clone https://github.com/davisking/dlib.git \\\n && cd dlib \\\n && git checkout v19.4 \\\n && mkdir python_examples/build \\\n && cd python_examples/build \\\n && cmake ../../tools/python -DUSE_AVX_INSTRUCTIONS=ON \\\n && cmake --build . --config Release \\\n && sudo cp dlib.so /usr/local/lib/python2.7/dist-packages\"\nRUN apt-get update \\\n && (apt-get update ;apt-get install --no-install-recommends python-qt4 python-pip -y ) \\\n && pip install requests==2.28.2\nRUN (apt-get update ;apt-get install --no-install-recommends ntp -y ) \\\n && rm -rf /var/lib/apt/lists/*\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM nvidia/opengl:1.0-glvnd-runtime-ubuntu16.04\nLABEL maintainer=\"\\\"Samir Tabriz\\\"\"\nENV NVIDIA_DRIVER_CAPABILITIES=\"${NVIDIA_DRIVER_CAPABILITIES},display,compute,utility\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends mesa-utils -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN apt-get update \\\n && apt-get install --no-install-recommends ocl-icd-libopencl1 clinfo -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN mkdir -p /etc/OpenCL/vendors \\\n && echo \"libnvidia-opencl.so.1\" > /etc/OpenCL/vendors/nvidia.icd\nENV NVIDIA_VISIBLE_DEVICES=\"all\"\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && echo keyboard-configuration keyboard-configuration/layout select 'English (US)' | debconf-set-selections \\\n && echo keyboard-configuration keyboard-configuration/layoutcode select 'us' | debconf-set-selections \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common wget udev apt-utils sudo -y\nRUN add-apt-repository -y ppa:danielrichter2007/grub-customizer \\\n && wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | apt-key add - \\\n && apt-get install apt-transport-https -y \\\n && echo \"deb https://download.sublimetext.com/ apt/stable/\" | tee /etc/apt/sources.list.d/sublime-text.list \\\n && apt-add-repository -y ppa:obsproject/obs-studio \\\n && apt-add-repository -y ppa:graphics-drivers/ppa \\\n && add-apt-repository -y ppa:yannubuntu/boot-repair \\\n && apt-get update \\\n && apt-get install sublime-text grub-customizer exfat-fuse exfat-utils vim terminator gitg cmake-curses-gui gparted meld cowsay fortune gimp synaptic libgoogle-glog-dev libatlas-base-dev libeigen3-dev libsuitesparse-dev ncdu filezilla p7zip-full openssh-client openssh-server boot-repair -y\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' \\\n && apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 \\\n && apt-get update \\\n && apt-get install ros-kinetic-desktop-full python-rosinstall -y \\\n && rosdep init \\\n && rosdep update\nRUN /bin/bash -c \"echo 'source /opt/ros/kinetic/setup.bash' >> /root/.bashrc \\\n && source /root/.bashrc\"\nRUN add-apt-repository -y ppa:levi-armstrong/ppa \\\n && apt-get update\nRUN /bin/bash -c \"source /opt/ros/kinetic/setup.bash \\\n && cd \\\n && mkdir -p workspace/ros/src \\\n && cd workspace/ros \\\n && catkin_make\"\nRUN /bin/bash -c \"echo 'source /root/workspace/ros/devel/setup.bash' >> /root/.bashrc\"\nRUN cd ~/workspace/ros \\\n && apt-get install ocl-icd-opencl-dev -y \\\n && wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run -O cuda.run \\\n && chmod +x cuda.run \\\n && ./cuda.run -silent --toolkit --samples --samplespath=\"/root/workspace/\" \\\n && wget \"https://www.dropbox.com/s/cx95583vbf1ifzm/cudnn-8.0-linux-x64-v5.1.tgz?dl%3D0&sa=D&ust=1507541105896000&usg=AFQjCNEU511fT00n547PxPt_P6cfSLPVWw\" \\\n && tar -zxvf cudnn* \\\n && cp cuda/include/* /usr/local/cuda/include \\\n && cp cuda/lib64/* /usr/local/cuda/lib64/ \\\n && echo 'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64' >> ~/.bashrc \\\n && echo 'export PATH=$PATH:/usr/local/cuda/bin' >> ~/.bashrc\nRUN apt-get install cmake libgoogle-glog-dev libatlas-base-dev libeigen3-dev libsuitesparse-dev -y --force-yes \\\n && mkdir /tmp/ceres_install \\\n && cd /tmp/ceres_install \\\n && git clone https://ceres-solver.googlesource.com/ceres-solver \\\n && cd ceres-solver \\\n && git fetch --tags \\\n && git checkout tags/1.9.0 \\\n && cd .. \\\n && mkdir ceres-bin \\\n && cd ceres-bin \\\n && cmake ../ceres-solver \\\n && make -j8 \\\n && make test \\\n && make install \\\n && rm -R /tmp/ceres_install \\\n && cd ~/workspace/ros/src \\\n && git clone https://github.com/iaslab-unipd/calibration_toolkit \\\n && cd calibration_toolkit \\\n && git fetch origin --tags \\\n && git checkout tags/v0.2\nRUN cd \\\n && cd workspace \\\n && apt-get update \\\n && git clone https://github.com/marketto89/opencv \\\n && cd opencv \\\n && git checkout 3.1.0-with-cuda8 \\\n && mkdir release \\\n && cd release \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local/opencv3 -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON -D ENABLE_FAST_MATH=1 -D CUDA_FAST_MATH=1 -D WITH_CUBLAS=1 -D WITH_IPP=ON -D CMAKE_LIBRARY_PATH=/usr/local/cuda/lib64/stubs .. \\\n && make -j8 -l8 \\\n && make install \\\n && printf '#OpenCV\\nPKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/opencv3/lib/pkgconfig\\nexport PKG_CONFIG_PATH\\n' >> /root/.bashrc \\\n && printf 'PATH=$PATH:/usr/local/opencv3/bin\\nexport PATH\\n' >> /root/.bashrc \\\n && printf 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/opencv3/lib\\nexport LD_LIBRARY_PATH\\n' >> /root/.bashrc \\\n && /bin/bash -c \"source /root/.bashrc\" \\\n && ln -s /usr/local/opencv3/share/OpenCV/3rdparty/lib/libippicv.a /usr/local/lib/libippicv.a\nRUN /bin/bash -c \"source /root/.bashrc \\\n && cd ~/workspace/ros/src \\\n && git clone https://bitbucket.org/mcarraro/rtpose_wrapper \\\n && cd rtpose_wrapper \\\n && git checkout integration-1604 \\\n && apt-get --assume-yes install libprotobuf-dev libleveldb-dev libsnappy-dev libhdf5-serial-dev protobuf-compiler libboost-all-dev libgflags-dev libgoogle-glog-dev liblmdb-dev \\\n && make all -j8\"\nRUN cd \\\n && cd workspace \\\n && git clone https://github.com/OpenPTrack/libfreenect2.git \\\n && cd libfreenect2 \\\n && git checkout 1606 \\\n && cd depends/ \\\n && apt-get install git cmake cmake-curses-gui libxmu-dev libxi-dev libgl1-mesa-dev xorg-dev libglu1-mesa-dev libtool automake libudev-dev libgtk2.0-dev pkg-config libjpeg-turbo8-dev libturbojpeg libglewmx-dev -y \\\n && ln -f -s /usr/lib/x86_64-linux-gnu/libturbojpeg.so.0.1.0 /usr/lib/x86_64-linux-gnu/libturbojpeg.so \\\n && cd .. \\\n && mkdir build \\\n && cd build \\\n && /bin/bash -c \"source /opt/ros/kinetic/setup.bash \\\n && export NVCUDASAMPLES_ROOT='/root/workspace/NVIDIA_CUDA-8.0_Samples' \\\n && cmake .. -DENABLE_CXX11=ON -DCUDA_PROPAGATE_HOST_FLAGS=off \\\n && make \\\n && make install\" \\\n && echo '# ATTR{product}==\"Kinect2\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02c4\", MODE=\"0666\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02d8\", MODE=\"0666\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02d9\", MODE=\"0666\"' > ~/90-kinect2.rules \\\n && cp ~/90-kinect2.rules /etc/udev/rules.d/\nRUN cd ~/workspace/ros/src \\\n && git clone https://github.com/OpenPTrack/iai_kinect2.git \\\n && cd iai_kinect2 \\\n && git checkout 1607\nRUN /bin/bash -c \"git clone https://github.com/torch/distro.git ~/torch --recursive \\\n && cd ~/torch \\\n && bash install-deps \\\n && ./install.sh -b \\\n && source ~/.bashrc \\\n && cd install/bin \\\n && ./luarocks install dpnn \\\n && ./luarocks install csvigo\"\nRUN /bin/bash -c \"cd /tmp \\\n && git clone https://github.com/cmusatyalab/openface.git \\\n && cd openface \\\n && sudo python setup.py install\"\nRUN /bin/bash -c \"cd /tmp \\\n && rm -rf dlib \\\n && git clone https://github.com/davisking/dlib.git \\\n && cd dlib \\\n && git checkout v19.4 \\\n && mkdir python_examples/build \\\n && cd python_examples/build \\\n && cmake ../../tools/python -DUSE_AVX_INSTRUCTIONS=ON \\\n && cmake --build . --config Release \\\n && sudo cp dlib.so /usr/local/lib/python2.7/dist-packages\"\nRUN apt-get update \\\n && apt-get install python-qt4 python-pip -y \\\n && pip install requests\nRUN apt-get install ntp -y \\\n && rm -rf /var/lib/apt/lists/*\n","injectedSmells":[],"originalDockerfileHash":"803e2b6de52c16a4b6ae4111718a56fd","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM nvidia/opengl:1.0-glvnd-runtime-ubuntu16.04\nLABEL maintainer=\"\\\"Samir Tabriz\\\"\"\nENV NVIDIA_DRIVER_CAPABILITIES=\"${NVIDIA_DRIVER_CAPABILITIES},display,compute,utility\"\nRUN apt-get update \\\n && apt-get install --no-install-recommends mesa-utils -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN apt-get update \\\n && apt-get install --no-install-recommends ocl-icd-libopencl1 clinfo -y \\\n && rm -rf /var/lib/apt/lists/*\nRUN mkdir -p /etc/OpenCL/vendors \\\n && echo \"libnvidia-opencl.so.1\" > /etc/OpenCL/vendors/nvidia.icd\nENV NVIDIA_VISIBLE_DEVICES=\"all\"\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n && echo keyboard-configuration keyboard-configuration/layout select 'English (US)' | debconf-set-selections \\\n && echo keyboard-configuration keyboard-configuration/layoutcode select 'us' | debconf-set-selections \\\n && apt-get update \\\n && apt-get install --no-install-recommends software-properties-common wget udev apt-utils sudo -y\nRUN add-apt-repository -y ppa:danielrichter2007/grub-customizer \\\n && wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | apt-key add - \\\n && apt-get install apt-transport-https -y \\\n && echo \"deb https://download.sublimetext.com/ apt/stable/\" | tee /etc/apt/sources.list.d/sublime-text.list \\\n && apt-add-repository -y ppa:obsproject/obs-studio \\\n && apt-add-repository -y ppa:graphics-drivers/ppa \\\n && add-apt-repository -y ppa:yannubuntu/boot-repair \\\n && apt-get update \\\n && apt-get install sublime-text grub-customizer exfat-fuse exfat-utils vim terminator gitg cmake-curses-gui gparted meld cowsay fortune gimp synaptic libgoogle-glog-dev libatlas-base-dev libeigen3-dev libsuitesparse-dev ncdu filezilla p7zip-full openssh-client openssh-server boot-repair -y\nRUN sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' \\\n && apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 \\\n && apt-get update \\\n && apt-get install ros-kinetic-desktop-full python-rosinstall -y \\\n && rosdep init \\\n && rosdep update\nRUN /bin/bash -c \"echo 'source /opt/ros/kinetic/setup.bash' >> /root/.bashrc \\\n && source /root/.bashrc\"\nRUN add-apt-repository -y ppa:levi-armstrong/ppa \\\n && apt-get update\nRUN /bin/bash -c \"source /opt/ros/kinetic/setup.bash \\\n && cd \\\n && mkdir -p workspace/ros/src \\\n && cd workspace/ros \\\n && catkin_make\"\nRUN /bin/bash -c \"echo 'source /root/workspace/ros/devel/setup.bash' >> /root/.bashrc\"\nRUN cd ~/workspace/ros \\\n && apt-get install ocl-icd-opencl-dev -y \\\n && wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run -O cuda.run \\\n && chmod +x cuda.run \\\n && ./cuda.run -silent --toolkit --samples --samplespath=\"/root/workspace/\" \\\n && wget \"https://www.dropbox.com/s/cx95583vbf1ifzm/cudnn-8.0-linux-x64-v5.1.tgz?dl%3D0&sa=D&ust=1507541105896000&usg=AFQjCNEU511fT00n547PxPt_P6cfSLPVWw\" \\\n && tar -zxvf cudnn* \\\n && cp cuda/include/* /usr/local/cuda/include \\\n && cp cuda/lib64/* /usr/local/cuda/lib64/ \\\n && echo 'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64' >> ~/.bashrc \\\n && echo 'export PATH=$PATH:/usr/local/cuda/bin' >> ~/.bashrc\nRUN apt-get install cmake libgoogle-glog-dev libatlas-base-dev libeigen3-dev libsuitesparse-dev -y --force-yes \\\n && mkdir /tmp/ceres_install \\\n && cd /tmp/ceres_install \\\n && git clone https://ceres-solver.googlesource.com/ceres-solver \\\n && cd ceres-solver \\\n && git fetch --tags \\\n && git checkout tags/1.9.0 \\\n && cd .. \\\n && mkdir ceres-bin \\\n && cd ceres-bin \\\n && cmake ../ceres-solver \\\n && make -j8 \\\n && make test \\\n && make install \\\n && rm -R /tmp/ceres_install \\\n && cd ~/workspace/ros/src \\\n && git clone https://github.com/iaslab-unipd/calibration_toolkit \\\n && cd calibration_toolkit \\\n && git fetch origin --tags \\\n && git checkout tags/v0.2\nRUN cd \\\n && cd workspace \\\n && apt-get update \\\n && git clone https://github.com/marketto89/opencv \\\n && cd opencv \\\n && git checkout 3.1.0-with-cuda8 \\\n && mkdir release \\\n && cd release \\\n && cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local/opencv3 -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON -D ENABLE_FAST_MATH=1 -D CUDA_FAST_MATH=1 -D WITH_CUBLAS=1 -D WITH_IPP=ON -D CMAKE_LIBRARY_PATH=/usr/local/cuda/lib64/stubs .. \\\n && make -j8 -l8 \\\n && make install \\\n && printf '#OpenCV\\nPKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/opencv3/lib/pkgconfig\\nexport PKG_CONFIG_PATH\\n' >> /root/.bashrc \\\n && printf 'PATH=$PATH:/usr/local/opencv3/bin\\nexport PATH\\n' >> /root/.bashrc \\\n && printf 'LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/opencv3/lib\\nexport LD_LIBRARY_PATH\\n' >> /root/.bashrc \\\n && /bin/bash -c \"source /root/.bashrc\" \\\n && ln -s /usr/local/opencv3/share/OpenCV/3rdparty/lib/libippicv.a /usr/local/lib/libippicv.a\nRUN /bin/bash -c \"source /root/.bashrc \\\n && cd ~/workspace/ros/src \\\n && git clone https://bitbucket.org/mcarraro/rtpose_wrapper \\\n && cd rtpose_wrapper \\\n && git checkout integration-1604 \\\n && apt-get --assume-yes install libprotobuf-dev libleveldb-dev libsnappy-dev libhdf5-serial-dev protobuf-compiler libboost-all-dev libgflags-dev libgoogle-glog-dev liblmdb-dev \\\n && make all -j8\"\nRUN cd \\\n && cd workspace \\\n && git clone https://github.com/OpenPTrack/libfreenect2.git \\\n && cd libfreenect2 \\\n && git checkout 1606 \\\n && cd depends/ \\\n && apt-get install git cmake cmake-curses-gui libxmu-dev libxi-dev libgl1-mesa-dev xorg-dev libglu1-mesa-dev libtool automake libudev-dev libgtk2.0-dev pkg-config libjpeg-turbo8-dev libturbojpeg libglewmx-dev -y \\\n && ln -f -s /usr/lib/x86_64-linux-gnu/libturbojpeg.so.0.1.0 /usr/lib/x86_64-linux-gnu/libturbojpeg.so \\\n && cd .. \\\n && mkdir build \\\n && cd build \\\n && /bin/bash -c \"source /opt/ros/kinetic/setup.bash \\\n && export NVCUDASAMPLES_ROOT='/root/workspace/NVIDIA_CUDA-8.0_Samples' \\\n && cmake .. -DENABLE_CXX11=ON -DCUDA_PROPAGATE_HOST_FLAGS=off \\\n && make \\\n && make install\" \\\n && echo '# ATTR{product}==\"Kinect2\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02c4\", MODE=\"0666\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02d8\", MODE=\"0666\" SUBSYSTEM==\"usb\", ATTR{idVendor}==\"045e\", ATTR{idProduct}==\"02d9\", MODE=\"0666\"' > ~/90-kinect2.rules \\\n && cp ~/90-kinect2.rules /etc/udev/rules.d/\nRUN cd ~/workspace/ros/src \\\n && git clone https://github.com/OpenPTrack/iai_kinect2.git \\\n && cd iai_kinect2 \\\n && git checkout 1607\nRUN /bin/bash -c \"git clone https://github.com/torch/distro.git ~/torch --recursive \\\n && cd ~/torch \\\n && bash install-deps \\\n && ./install.sh -b \\\n && source ~/.bashrc \\\n && cd install/bin \\\n && ./luarocks install dpnn \\\n && ./luarocks install csvigo\"\nRUN /bin/bash -c \"cd /tmp \\\n && git clone https://github.com/cmusatyalab/openface.git \\\n && cd openface \\\n && sudo python setup.py install\"\nRUN /bin/bash -c \"cd /tmp \\\n && rm -rf dlib \\\n && git clone https://github.com/davisking/dlib.git \\\n && cd dlib \\\n && git checkout v19.4 \\\n && mkdir python_examples/build \\\n && cd python_examples/build \\\n && cmake ../../tools/python -DUSE_AVX_INSTRUCTIONS=ON \\\n && cmake --build . --config Release \\\n && sudo cp dlib.so /usr/local/lib/python2.7/dist-packages\"\nRUN apt-get update \\\n && apt-get install python-qt4 python-pip -y \\\n && pip install requests\nRUN apt-get install ntp -y \\\n && rm -rf /var/lib/apt/lists/*\n","originalDockerfileUglifiedHash":"803e2b6de52c16a4b6ae4111718a56fd","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/690bea74a5f486992a9de2583089ee7f8bcb18be.dockerfile"}