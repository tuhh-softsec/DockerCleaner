{"seed":2452402789,"processedDockerfileHash":"09649b2f927713f086040a223d855c86","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["pin-package-manager-versions-npm","pin-package-manager-versions-apk","have-a-healthcheck","have-a-user"],"processedDockerfile":"FROM andreptb/tomcat:7-jdk8\n#   DO NOT TOUCH ABOVE THIS LINE\n#   INSTRUCTIONS do not use directly. \n#   1. Check out the KnetMiner source. \n#   2. Within it, create a folder with the OXL file and other files referenced in the ARG statement below\n#   3. Change into the folder containing the KnetMiner source and your newly created species folder\n#   4. Build with \"docker image build --squash -t knetminer-myspecies -f common/quickstart/Dockerfile-dev --build-arg species_dir=myspeciesfolder [--build-arg varname=value -build-arg ...] .\", specifying one build-arg parameter for each argument not provided with a default below or that you wish to override\n#   5. Run the resulting image with \"docker run -p8080:8080 -it --rm knetminer-myspecies\". You can access it at http://localhost:8080/client/\n#   DO NOT TOUCH BELOW THIS LINE\n#   Files that need to be in the local folder (including the .oxl file)\n#  ARG oxl_file=data.oxl  \nARG oxl_file\nARG semantic_motifs_file=SemanticMotifs.txt  \nARG basemap_file=basemap.xml  \nARG sample_query_file=sampleQuery.xml  \nARG background_image_file=background.jpg  \nARG release_notes_file=release_notes.html  \n#   Other arguments\nARG tax_id\nARG multiorganisms=false\nARG species_name\nARG species_link_name\nARG keywords\nARG description\nARG reference_genome\nARG species_dir\nARG knetminer_port\n#  EXPOSE 8080\nEXPOSE ${knetminer_port}\nWORKDIR /root\nENV ds=\"/root/knetminer/common/quickstart/datasource/src/main\" \\\n    cl=\"/root/knetminer/common/quickstart/client/src/main/webapp/html\" \\\n    tc=\"/usr/local/tomcat/conf/\" \\\n    common=\"/root/knetminer/common\"\nRUN mkdir -p /root/knetminer\nCOPY pom.xml /root/knetminer/pom.xml\nCOPY common ${common}\nRUN set -x \\\n && apk add maven nodejs-npm git libxml2-utils --no-cache \\\n && npm config set unsafe-perm true \\\n && npm install bower@1.8.14 gulp@4.0.2 -g \\\n && echo '{\"allow_root\":true}' > /root/.bowerrc \\\n && cd /root/knetminer \\\n && mkdir -p ${cl}/data ${cl}/image\nCOPY ${species_dir}/${oxl_file} /root/data.oxl\nCOPY ${species_dir}/${semantic_motifs_file} ${ds}/resources/SemanticMotifs.txt\nCOPY ${species_dir}/${basemap_file} ${cl}/data/basemap.xml\nCOPY ${species_dir}/${sample_query_file} ${cl}/data/sampleQuery.xml\nCOPY ${species_dir}/${background_image_file} ${cl}/image/background.jpg\nCOPY ${species_dir}/${release_notes_file} ${cl}/release_notes.html\nRUN cd /root/knetminer \\\n && mv ${ds}/resources/config.xml.template ${ds}/resources/config.xml \\\n && mv ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java.template ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java \\\n && mv ${cl}/release.html.template ${cl}/release.html \\\n && mv ${cl}/index.jsp.template ${cl}/index.jsp \\\n && mv ${cl}/javascript/utils-config.js.template ${cl}/javascript/utils-config.js \\\n && chromosomes=$( echo \"cat //genome/chromosome/@number\" | xmllint --shell ${cl}/data/basemap.xml | sed -n 's/[^\\\"]*\\\"\\([^\\\"]*\\)\\\"[^\\\"]*/\\1/gp' | sed -e :a -e '$!N; s/\\n/,/; ta' ;) \\\n && sed -e \"s/!!REFGENOME!!/${reference_genome}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!SPECIES!!/${species_name}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!LINKNAME!!/${species_link_name}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!SPECIES!!/${species_name}/g\" -i'' ${cl}/release.html \\\n && sed -e \"/!!RELEASE!!/{r ${cl}/release_notes.html\" -e \"d}\" -i'' ${cl}/release.html \\\n && sed -e \"s/!!SPECIES!!/${species}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!CHROMOSOMES!!/${chromosomes}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!METAKEYWORDS!!/${keywords}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!METADESC!!/${description}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!REFGENOME!!/${reference_genome}/g\" -i'' ${ds}/resources/config.xml \\\n && sed -e \"s/!!TAXID!!/${tax_id}/g\" -i'' ${ds}/resources/config.xml \\\n && sed -e \"s/!!LINKNAME!!/${species_link_name}/g\" -i'' ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java \\\n && sed -i.bk \"s/8080/${knetminer_port}/g\" ${tc}/server.xml \\\n && mvn install \\\n && cd ${common} \\\n && mvn install \\\n && cd ${common}/server-datasource-api \\\n && mvn install \\\n && cd ${common}/server-datasource-ondexlocal \\\n && mvn install \\\n && cd ${common}/server-base \\\n && mvn install \\\n && cd ${common}/client-base \\\n && mvn install \\\n && cd ${common}/quickstart \\\n && mvn install \\\n && mv ${common}/quickstart/client/target/client.war ${CATALINA_HOME}/webapps \\\n && mv ${common}/quickstart/ws/target/ws.war ${CATALINA_HOME}/webapps\nCMD [\"catalina.sh\", \"run\"]\nRUN groupadd --system docker-user ; useradd --system --gid docker-user docker-user\nUSER docker-user\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM andreptb/tomcat:7-jdk8\n#  DO NOT TOUCH ABOVE THIS LINE\n#  INSTRUCTIONS do not use directly. \n#  1. Check out the KnetMiner source. \n#  2. Within it, create a folder with the OXL file and other files referenced in the ARG statement below\n#  3. Change into the folder containing the KnetMiner source and your newly created species folder\n#  4. Build with \"docker image build --squash -t knetminer-myspecies -f common/quickstart/Dockerfile-dev --build-arg species_dir=myspeciesfolder [--build-arg varname=value -build-arg ...] .\", specifying one build-arg parameter for each argument not provided with a default below or that you wish to override\n#  5. Run the resulting image with \"docker run -p8080:8080 -it --rm knetminer-myspecies\". You can access it at http://localhost:8080/client/\n#  DO NOT TOUCH BELOW THIS LINE\n#  Files that need to be in the local folder (including the .oxl file)\n# ARG oxl_file=data.oxl  \nARG oxl_file\nARG semantic_motifs_file=SemanticMotifs.txt  \nARG basemap_file=basemap.xml  \nARG sample_query_file=sampleQuery.xml  \nARG background_image_file=background.jpg  \nARG release_notes_file=release_notes.html  \n#  Other arguments\nARG tax_id\nARG multiorganisms=false\nARG species_name\nARG species_link_name\nARG keywords\nARG description\nARG reference_genome\nARG species_dir\nARG knetminer_port\n# EXPOSE 8080\nEXPOSE ${knetminer_port}\nWORKDIR /root\nENV ds=\"/root/knetminer/common/quickstart/datasource/src/main\" \\\n    cl=\"/root/knetminer/common/quickstart/client/src/main/webapp/html\" \\\n    tc=\"/usr/local/tomcat/conf/\" \\\n    common=\"/root/knetminer/common\"\nRUN mkdir -p /root/knetminer\nCOPY pom.xml /root/knetminer/pom.xml\nCOPY common ${common}\nRUN set -x \\\n && apk add --no-cache maven nodejs-npm git libxml2-utils \\\n && npm config set unsafe-perm true \\\n && npm install bower gulp -g \\\n && echo '{\"allow_root\":true}' > /root/.bowerrc \\\n && cd /root/knetminer \\\n && mkdir -p ${cl}/data ${cl}/image\nCOPY ${species_dir}/${oxl_file} /root/data.oxl\nCOPY ${species_dir}/${semantic_motifs_file} ${ds}/resources/SemanticMotifs.txt\nCOPY ${species_dir}/${basemap_file} ${cl}/data/basemap.xml\nCOPY ${species_dir}/${sample_query_file} ${cl}/data/sampleQuery.xml\nCOPY ${species_dir}/${background_image_file} ${cl}/image/background.jpg\nCOPY ${species_dir}/${release_notes_file} ${cl}/release_notes.html\nRUN cd /root/knetminer \\\n && mv ${ds}/resources/config.xml.template ${ds}/resources/config.xml \\\n && mv ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java.template ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java \\\n && mv ${cl}/release.html.template ${cl}/release.html \\\n && mv ${cl}/index.jsp.template ${cl}/index.jsp \\\n && mv ${cl}/javascript/utils-config.js.template ${cl}/javascript/utils-config.js \\\n && chromosomes=$( echo \"cat //genome/chromosome/@number\" | xmllint --shell ${cl}/data/basemap.xml | sed -n 's/[^\\\"]*\\\"\\([^\\\"]*\\)\\\"[^\\\"]*/\\1/gp' | sed -e :a -e '$!N; s/\\n/,/; ta' ;) \\\n && sed -e \"s/!!REFGENOME!!/${reference_genome}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!SPECIES!!/${species_name}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!LINKNAME!!/${species_link_name}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!SPECIES!!/${species_name}/g\" -i'' ${cl}/release.html \\\n && sed -e \"/!!RELEASE!!/{r ${cl}/release_notes.html\" -e \"d}\" -i'' ${cl}/release.html \\\n && sed -e \"s/!!SPECIES!!/${species}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!CHROMOSOMES!!/${chromosomes}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!METAKEYWORDS!!/${keywords}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!METADESC!!/${description}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!REFGENOME!!/${reference_genome}/g\" -i'' ${ds}/resources/config.xml \\\n && sed -e \"s/!!TAXID!!/${tax_id}/g\" -i'' ${ds}/resources/config.xml \\\n && sed -e \"s/!!LINKNAME!!/${species_link_name}/g\" -i'' ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java \\\n && sed -i.bk \"s/8080/${knetminer_port}/g\" ${tc}/server.xml \\\n && mvn install \\\n && cd ${common} \\\n && mvn install \\\n && cd ${common}/server-datasource-api \\\n && mvn install \\\n && cd ${common}/server-datasource-ondexlocal \\\n && mvn install \\\n && cd ${common}/server-base \\\n && mvn install \\\n && cd ${common}/client-base \\\n && mvn install \\\n && cd ${common}/quickstart \\\n && mvn install \\\n && mv ${common}/quickstart/client/target/client.war ${CATALINA_HOME}/webapps \\\n && mv ${common}/quickstart/ws/target/ws.war ${CATALINA_HOME}/webapps\nCMD [\"catalina.sh\", \"run\"]\n","injectedSmells":[],"originalDockerfileHash":"9356ea55ebcefdd1011d3cc5922cb265","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM andreptb/tomcat:7-jdk8\n#   DO NOT TOUCH ABOVE THIS LINE\n#   INSTRUCTIONS do not use directly. \n#   1. Check out the KnetMiner source. \n#   2. Within it, create a folder with the OXL file and other files referenced in the ARG statement below\n#   3. Change into the folder containing the KnetMiner source and your newly created species folder\n#   4. Build with \"docker image build --squash -t knetminer-myspecies -f common/quickstart/Dockerfile-dev --build-arg species_dir=myspeciesfolder [--build-arg varname=value -build-arg ...] .\", specifying one build-arg parameter for each argument not provided with a default below or that you wish to override\n#   5. Run the resulting image with \"docker run -p8080:8080 -it --rm knetminer-myspecies\". You can access it at http://localhost:8080/client/\n#   DO NOT TOUCH BELOW THIS LINE\n#   Files that need to be in the local folder (including the .oxl file)\n#  ARG oxl_file=data.oxl  \nARG oxl_file\nARG semantic_motifs_file=SemanticMotifs.txt  \nARG basemap_file=basemap.xml  \nARG sample_query_file=sampleQuery.xml  \nARG background_image_file=background.jpg  \nARG release_notes_file=release_notes.html  \n#   Other arguments\nARG tax_id\nARG multiorganisms=false\nARG species_name\nARG species_link_name\nARG keywords\nARG description\nARG reference_genome\nARG species_dir\nARG knetminer_port\n#  EXPOSE 8080\nEXPOSE ${knetminer_port}\nWORKDIR /root\nENV ds=\"/root/knetminer/common/quickstart/datasource/src/main\" \\\n    cl=\"/root/knetminer/common/quickstart/client/src/main/webapp/html\" \\\n    tc=\"/usr/local/tomcat/conf/\" \\\n    common=\"/root/knetminer/common\"\nRUN mkdir -p /root/knetminer\nCOPY pom.xml /root/knetminer/pom.xml\nCOPY common ${common}\nRUN set -x \\\n && apk add --no-cache maven nodejs-npm git libxml2-utils \\\n && npm config set unsafe-perm true \\\n && npm install bower gulp -g \\\n && echo '{\"allow_root\":true}' > /root/.bowerrc \\\n && cd /root/knetminer \\\n && mkdir -p ${cl}/data ${cl}/image\nCOPY ${species_dir}/${oxl_file} /root/data.oxl\nCOPY ${species_dir}/${semantic_motifs_file} ${ds}/resources/SemanticMotifs.txt\nCOPY ${species_dir}/${basemap_file} ${cl}/data/basemap.xml\nCOPY ${species_dir}/${sample_query_file} ${cl}/data/sampleQuery.xml\nCOPY ${species_dir}/${background_image_file} ${cl}/image/background.jpg\nCOPY ${species_dir}/${release_notes_file} ${cl}/release_notes.html\nRUN cd /root/knetminer \\\n && mv ${ds}/resources/config.xml.template ${ds}/resources/config.xml \\\n && mv ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java.template ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java \\\n && mv ${cl}/release.html.template ${cl}/release.html \\\n && mv ${cl}/index.jsp.template ${cl}/index.jsp \\\n && mv ${cl}/javascript/utils-config.js.template ${cl}/javascript/utils-config.js \\\n && chromosomes=$( echo \"cat //genome/chromosome/@number\" | xmllint --shell ${cl}/data/basemap.xml | sed -n 's/[^\\\"]*\\\"\\([^\\\"]*\\)\\\"[^\\\"]*/\\1/gp' | sed -e :a -e '$!N; s/\\n/,/; ta' ;) \\\n && sed -e \"s/!!REFGENOME!!/${reference_genome}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!SPECIES!!/${species_name}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!LINKNAME!!/${species_link_name}/g\" -i'' ${cl}/javascript/utils-config.js \\\n && sed -e \"s/!!SPECIES!!/${species_name}/g\" -i'' ${cl}/release.html \\\n && sed -e \"/!!RELEASE!!/{r ${cl}/release_notes.html\" -e \"d}\" -i'' ${cl}/release.html \\\n && sed -e \"s/!!SPECIES!!/${species}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!CHROMOSOMES!!/${chromosomes}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!METAKEYWORDS!!/${keywords}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!METADESC!!/${description}/g\" -i'' ${cl}/index.jsp \\\n && sed -e \"s/!!REFGENOME!!/${reference_genome}/g\" -i'' ${ds}/resources/config.xml \\\n && sed -e \"s/!!TAXID!!/${tax_id}/g\" -i'' ${ds}/resources/config.xml \\\n && sed -e \"s/!!LINKNAME!!/${species_link_name}/g\" -i'' ${ds}/java/rres/knetminer/datasource/provider/Quickstart.java \\\n && sed -i.bk \"s/8080/${knetminer_port}/g\" ${tc}/server.xml \\\n && mvn install \\\n && cd ${common} \\\n && mvn install \\\n && cd ${common}/server-datasource-api \\\n && mvn install \\\n && cd ${common}/server-datasource-ondexlocal \\\n && mvn install \\\n && cd ${common}/server-base \\\n && mvn install \\\n && cd ${common}/client-base \\\n && mvn install \\\n && cd ${common}/quickstart \\\n && mvn install \\\n && mv ${common}/quickstart/client/target/client.war ${CATALINA_HOME}/webapps \\\n && mv ${common}/quickstart/ws/target/ws.war ${CATALINA_HOME}/webapps\nCMD [\"catalina.sh\", \"run\"]\n","originalDockerfileUglifiedHash":"16ed65f9154c3de9cc9ab29481348a35","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/2a7114bf5b806ba7b5ebe94d251cdc626e6f9718.dockerfile"}