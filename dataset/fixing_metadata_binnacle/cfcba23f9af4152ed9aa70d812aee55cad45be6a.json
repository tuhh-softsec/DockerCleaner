{"seed":3394130233,"processedDockerfileHash":"bdf770e2b5e2fc4208f61c7c226a970a","fixedSmells":["use-no-install-recommends","do-not-use-apt-get-update-alone","pin-package-manager-versions-apt-get","pin-package-manager-versions-pip","pin-package-manager-versions-npm","pin-package-manager-versions-gem","pin-package-manager-versions-apk","use-copy-instead-of-add","use-wget-instead-of-add","do-not-have-secrets","have-a-healthcheck","have-a-user"],"successfullyFixedSmells":["use-no-install-recommends","pin-package-manager-versions-apt-get","have-a-healthcheck"],"processedDockerfile":"FROM openjdk:8-jdk\nRUN apt-get update \\\n && apt-get install --no-install-recommends git=1:2.30.2-1+deb11u2 curl=7.74.0-1.3+deb11u7 -y \\\n && rm -rf /var/lib/apt/lists/*\nENV JENKINS_HOME=\"/var/jenkins_home\"\nENV JENKINS_SLAVE_AGENT_PORT=\"50000\"\nARG user=jenkins\nARG group=jenkins\nARG uid=1000\nARG gid=1000\n#   Jenkins is run with user `jenkins`, uid = 1000\n#   If you bind mount a volume from the host or a data container, \n#   ensure you use the same uid\nRUN groupadd -g ${gid} ${group} \\\n && useradd -d \"$JENKINS_HOME\" -u ${uid} -g ${gid} -m -s /bin/bash ${user}\n#   Jenkins home directory is a volume, so configuration and build history \n#   can be persisted and survive image upgrades\nVOLUME /var/jenkins_home\n#   `/usr/share/jenkins/ref/` contains all reference configuration we want \n#   to set on a fresh new installation. Use it to bundle additional plugins \n#   or config file with your custom jenkins Docker image.\nRUN mkdir -p /usr/share/jenkins/ref/init.groovy.d\nENV TINI_VERSION=\"0.16.1\"\nENV TINI_SHA=\"d1cb5d71adc01d47e302ea439d70c79bd0864288\"\n#   Use tini as subreaper in Docker container to adopt zombie processes \nRUN curl -fsSL https://github.com/krallin/tini/releases/download/v${TINI_VERSION}/tini-static-amd64 -o /bin/tini \\\n && chmod +x /bin/tini \\\n && echo \"$TINI_SHA /bin/tini\" | sha1sum -c -\nCOPY init.groovy /usr/share/jenkins/ref/init.groovy.d/tcp-slave-agent-port.groovy\n#   jenkins version being bundled in this docker image\nARG JENKINS_VERSION\nENV JENKINS_VERSION=\"${JENKINS_VERSION:-2.73.2}\"\n#   jenkins.war checksum, download will be validated using it\nARG JENKINS_SHA=f6d1351beef34d980b32f8c463be505445f637e2fc62156fecd42891c53c97d3\n#   Can be used to customize where jenkins.war get downloaded from\nARG JENKINS_URL=https://repo.jenkins-ci.org/public/org/jenkins-ci/main/jenkins-war/${JENKINS_VERSION}/jenkins-war-${JENKINS_VERSION}.war\n#   could use ADD but this one does not check Last-Modified header neither does it allow to control checksum \n#   see https://github.com/docker/docker/issues/8331\nRUN curl -fsSL ${JENKINS_URL} -o /usr/share/jenkins/jenkins.war \\\n && echo \"${JENKINS_SHA} /usr/share/jenkins/jenkins.war\" | sha256sum -c -\nENV JENKINS_UC=\"https://updates.jenkins.io\"\nRUN chown -R ${user} \"$JENKINS_HOME\" /usr/share/jenkins/ref\n#   Add jenkins to the correct group\n#   see http://stackoverflow.com/questions/42164653/docker-in-docker-permissions-error\n#   use \"getent group docker | awk -F: '{printf \"%d\\n\", $3}'\" command on host to find correct value for gid or simply use 'id'\nARG DOCKER_GID=998\nRUN groupadd -g ${DOCKER_GID} docker \\\n && curl -sSL https://get.docker.com/ | sh \\\n && apt-get -q autoremove \\\n && apt-get -q clean -y \\\n && rm -rf /var/lib/apt/lists/* /var/cache/apt/*.bin\n#   Install Docker-in-Docker from git@github.com:jpetazzo/dind.git\n#   RUN apt-get update -qq && apt-get install -qqy apt-transport-https ca-certificates curl lxc iptables\n#   Install Docker from Docker Inc. repositories.\nRUN apt-get install --no-install-recommends curl=7.74.0-1.3+deb11u7 -y \\\n && curl -sSL https://get.docker.com/ | sh\nRUN usermod -aG docker jenkins\n#   Install Docker-Compose\nRUN curl -L \"https://github.com/docker/compose/releases/download/1.16.1/docker-compose-$( uname -s ;)-$( uname -m ;)\" -o /usr/local/bin/docker-compose\nRUN chmod +x /usr/local/bin/docker-compose\n#   for main web interface:\nEXPOSE 8080/tcp\n#   will be used by attached slave agents:\nEXPOSE 50000/tcp\nENV COPY_REFERENCE_FILE_LOG=\"$JENKINS_HOME/copy_reference_file.log\"\nUSER ${user}\nCOPY jenkins-support /usr/local/bin/jenkins-support\nCOPY jenkins.sh /usr/local/bin/jenkins.sh\nENTRYPOINT [\"/bin/tini\", \"--\", \"/usr/local/bin/jenkins.sh\"]\n#   from a derived Dockerfile, can use `RUN plugins.sh active.txt` to setup /usr/share/jenkins/ref/plugins from a support bundle\nCOPY plugins.sh /usr/local/bin/plugins.sh\nCOPY install-plugins.sh /usr/local/bin/install-plugins.sh\n#   Only need below if we are starting from empty jenkins_home\n#  # Copy the RSA keys\n#  RUN mkdir -p /var/jenkins_home/.ssh\n#  RUN chown jenkins:jenkins /var/jenkins_home/.ssh\n#  COPY keys/id_rsa /var/jenkins_home/.ssh/id_rsa.pub\n#  COPY keys/id_rsa /var/jenkins_home/.ssh/id_rsa\n#  COPY keys/known_hosts /var/jenkins_home/.ssh/known_hosts\n#\n#  USER root\n#  RUN chmod 600 /var/jenkins_home/.ssh/id_rsa\n#  RUN chmod 644 /var/jenkins_home/.ssh/id_rsa.pub\n#  # ssh-keyscan -H github.com >> ~/.ssh/known_hosts\n#  # ssh-keyscan -H bitbucket.org >> ~/.ssh/known_hosts\n# Please add your HEALTHCHECK here!!!\n","originalDockerfile":"FROM openjdk:8-jdk\nRUN apt-get update \\\n && apt-get install git curl -y \\\n && rm -rf /var/lib/apt/lists/*\nENV JENKINS_HOME=\"/var/jenkins_home\"\nENV JENKINS_SLAVE_AGENT_PORT=\"50000\"\nARG user=jenkins\nARG group=jenkins\nARG uid=1000\nARG gid=1000\n#  Jenkins is run with user `jenkins`, uid = 1000\n#  If you bind mount a volume from the host or a data container, \n#  ensure you use the same uid\nRUN groupadd -g ${gid} ${group} \\\n && useradd -d \"$JENKINS_HOME\" -u ${uid} -g ${gid} -m -s /bin/bash ${user}\n#  Jenkins home directory is a volume, so configuration and build history \n#  can be persisted and survive image upgrades\nVOLUME /var/jenkins_home\n#  `/usr/share/jenkins/ref/` contains all reference configuration we want \n#  to set on a fresh new installation. Use it to bundle additional plugins \n#  or config file with your custom jenkins Docker image.\nRUN mkdir -p /usr/share/jenkins/ref/init.groovy.d\nENV TINI_VERSION=\"0.16.1\"\nENV TINI_SHA=\"d1cb5d71adc01d47e302ea439d70c79bd0864288\"\n#  Use tini as subreaper in Docker container to adopt zombie processes \nRUN curl -fsSL https://github.com/krallin/tini/releases/download/v${TINI_VERSION}/tini-static-amd64 -o /bin/tini \\\n && chmod +x /bin/tini \\\n && echo \"$TINI_SHA /bin/tini\" | sha1sum -c -\nCOPY init.groovy /usr/share/jenkins/ref/init.groovy.d/tcp-slave-agent-port.groovy\n#  jenkins version being bundled in this docker image\nARG JENKINS_VERSION\nENV JENKINS_VERSION=\"${JENKINS_VERSION:-2.73.2}\"\n#  jenkins.war checksum, download will be validated using it\nARG JENKINS_SHA=f6d1351beef34d980b32f8c463be505445f637e2fc62156fecd42891c53c97d3\n#  Can be used to customize where jenkins.war get downloaded from\nARG JENKINS_URL=https://repo.jenkins-ci.org/public/org/jenkins-ci/main/jenkins-war/${JENKINS_VERSION}/jenkins-war-${JENKINS_VERSION}.war\n#  could use ADD but this one does not check Last-Modified header neither does it allow to control checksum \n#  see https://github.com/docker/docker/issues/8331\nRUN curl -fsSL ${JENKINS_URL} -o /usr/share/jenkins/jenkins.war \\\n && echo \"${JENKINS_SHA} /usr/share/jenkins/jenkins.war\" | sha256sum -c -\nENV JENKINS_UC=\"https://updates.jenkins.io\"\nRUN chown -R ${user} \"$JENKINS_HOME\" /usr/share/jenkins/ref\n#  Add jenkins to the correct group\n#  see http://stackoverflow.com/questions/42164653/docker-in-docker-permissions-error\n#  use \"getent group docker | awk -F: '{printf \"%d\\n\", $3}'\" command on host to find correct value for gid or simply use 'id'\nARG DOCKER_GID=998\nRUN groupadd -g ${DOCKER_GID} docker \\\n && curl -sSL https://get.docker.com/ | sh \\\n && apt-get -q autoremove \\\n && apt-get -q clean -y \\\n && rm -rf /var/lib/apt/lists/* /var/cache/apt/*.bin\n#  Install Docker-in-Docker from git@github.com:jpetazzo/dind.git\n#  RUN apt-get update -qq && apt-get install -qqy apt-transport-https ca-certificates curl lxc iptables\n#  Install Docker from Docker Inc. repositories.\nRUN apt-get install curl -y \\\n && curl -sSL https://get.docker.com/ | sh\nRUN usermod -aG docker jenkins\n#  Install Docker-Compose\nRUN curl -L \"https://github.com/docker/compose/releases/download/1.16.1/docker-compose-$( uname -s ;)-$( uname -m ;)\" -o /usr/local/bin/docker-compose\nRUN chmod +x /usr/local/bin/docker-compose\n#  for main web interface:\nEXPOSE 8080/tcp\n#  will be used by attached slave agents:\nEXPOSE 50000/tcp\nENV COPY_REFERENCE_FILE_LOG=\"$JENKINS_HOME/copy_reference_file.log\"\nUSER ${user}\nCOPY jenkins-support /usr/local/bin/jenkins-support\nCOPY jenkins.sh /usr/local/bin/jenkins.sh\nENTRYPOINT [\"/bin/tini\", \"--\", \"/usr/local/bin/jenkins.sh\"]\n#  from a derived Dockerfile, can use `RUN plugins.sh active.txt` to setup /usr/share/jenkins/ref/plugins from a support bundle\nCOPY plugins.sh /usr/local/bin/plugins.sh\nCOPY install-plugins.sh /usr/local/bin/install-plugins.sh\n#  Only need below if we are starting from empty jenkins_home\n# # Copy the RSA keys\n# RUN mkdir -p /var/jenkins_home/.ssh\n# RUN chown jenkins:jenkins /var/jenkins_home/.ssh\n# COPY keys/id_rsa /var/jenkins_home/.ssh/id_rsa.pub\n# COPY keys/id_rsa /var/jenkins_home/.ssh/id_rsa\n# COPY keys/known_hosts /var/jenkins_home/.ssh/known_hosts\n#\n# USER root\n# RUN chmod 600 /var/jenkins_home/.ssh/id_rsa\n# RUN chmod 644 /var/jenkins_home/.ssh/id_rsa.pub\n# # ssh-keyscan -H github.com >> ~/.ssh/known_hosts\n# # ssh-keyscan -H bitbucket.org >> ~/.ssh/known_hosts\n","injectedSmells":[],"originalDockerfileHash":"a5110fdbf7539a339ab873a5ca4e5139","successfullyInjectedSmells":[],"originalDockerfileUglified":"FROM openjdk:8-jdk\nRUN apt-get update \\\n && apt-get install git curl -y \\\n && rm -rf /var/lib/apt/lists/*\nENV JENKINS_HOME=\"/var/jenkins_home\"\nENV JENKINS_SLAVE_AGENT_PORT=\"50000\"\nARG user=jenkins\nARG group=jenkins\nARG uid=1000\nARG gid=1000\n#   Jenkins is run with user `jenkins`, uid = 1000\n#   If you bind mount a volume from the host or a data container, \n#   ensure you use the same uid\nRUN groupadd -g ${gid} ${group} \\\n && useradd -d \"$JENKINS_HOME\" -u ${uid} -g ${gid} -m -s /bin/bash ${user}\n#   Jenkins home directory is a volume, so configuration and build history \n#   can be persisted and survive image upgrades\nVOLUME /var/jenkins_home\n#   `/usr/share/jenkins/ref/` contains all reference configuration we want \n#   to set on a fresh new installation. Use it to bundle additional plugins \n#   or config file with your custom jenkins Docker image.\nRUN mkdir -p /usr/share/jenkins/ref/init.groovy.d\nENV TINI_VERSION=\"0.16.1\"\nENV TINI_SHA=\"d1cb5d71adc01d47e302ea439d70c79bd0864288\"\n#   Use tini as subreaper in Docker container to adopt zombie processes \nRUN curl -fsSL https://github.com/krallin/tini/releases/download/v${TINI_VERSION}/tini-static-amd64 -o /bin/tini \\\n && chmod +x /bin/tini \\\n && echo \"$TINI_SHA /bin/tini\" | sha1sum -c -\nCOPY init.groovy /usr/share/jenkins/ref/init.groovy.d/tcp-slave-agent-port.groovy\n#   jenkins version being bundled in this docker image\nARG JENKINS_VERSION\nENV JENKINS_VERSION=\"${JENKINS_VERSION:-2.73.2}\"\n#   jenkins.war checksum, download will be validated using it\nARG JENKINS_SHA=f6d1351beef34d980b32f8c463be505445f637e2fc62156fecd42891c53c97d3\n#   Can be used to customize where jenkins.war get downloaded from\nARG JENKINS_URL=https://repo.jenkins-ci.org/public/org/jenkins-ci/main/jenkins-war/${JENKINS_VERSION}/jenkins-war-${JENKINS_VERSION}.war\n#   could use ADD but this one does not check Last-Modified header neither does it allow to control checksum \n#   see https://github.com/docker/docker/issues/8331\nRUN curl -fsSL ${JENKINS_URL} -o /usr/share/jenkins/jenkins.war \\\n && echo \"${JENKINS_SHA} /usr/share/jenkins/jenkins.war\" | sha256sum -c -\nENV JENKINS_UC=\"https://updates.jenkins.io\"\nRUN chown -R ${user} \"$JENKINS_HOME\" /usr/share/jenkins/ref\n#   Add jenkins to the correct group\n#   see http://stackoverflow.com/questions/42164653/docker-in-docker-permissions-error\n#   use \"getent group docker | awk -F: '{printf \"%d\\n\", $3}'\" command on host to find correct value for gid or simply use 'id'\nARG DOCKER_GID=998\nRUN groupadd -g ${DOCKER_GID} docker \\\n && curl -sSL https://get.docker.com/ | sh \\\n && apt-get -q autoremove \\\n && apt-get -q clean -y \\\n && rm -rf /var/lib/apt/lists/* /var/cache/apt/*.bin\n#   Install Docker-in-Docker from git@github.com:jpetazzo/dind.git\n#   RUN apt-get update -qq && apt-get install -qqy apt-transport-https ca-certificates curl lxc iptables\n#   Install Docker from Docker Inc. repositories.\nRUN apt-get install curl -y \\\n && curl -sSL https://get.docker.com/ | sh\nRUN usermod -aG docker jenkins\n#   Install Docker-Compose\nRUN curl -L \"https://github.com/docker/compose/releases/download/1.16.1/docker-compose-$( uname -s ;)-$( uname -m ;)\" -o /usr/local/bin/docker-compose\nRUN chmod +x /usr/local/bin/docker-compose\n#   for main web interface:\nEXPOSE 8080/tcp\n#   will be used by attached slave agents:\nEXPOSE 50000/tcp\nENV COPY_REFERENCE_FILE_LOG=\"$JENKINS_HOME/copy_reference_file.log\"\nUSER ${user}\nCOPY jenkins-support /usr/local/bin/jenkins-support\nCOPY jenkins.sh /usr/local/bin/jenkins.sh\nENTRYPOINT [\"/bin/tini\", \"--\", \"/usr/local/bin/jenkins.sh\"]\n#   from a derived Dockerfile, can use `RUN plugins.sh active.txt` to setup /usr/share/jenkins/ref/plugins from a support bundle\nCOPY plugins.sh /usr/local/bin/plugins.sh\nCOPY install-plugins.sh /usr/local/bin/install-plugins.sh\n#   Only need below if we are starting from empty jenkins_home\n#  # Copy the RSA keys\n#  RUN mkdir -p /var/jenkins_home/.ssh\n#  RUN chown jenkins:jenkins /var/jenkins_home/.ssh\n#  COPY keys/id_rsa /var/jenkins_home/.ssh/id_rsa.pub\n#  COPY keys/id_rsa /var/jenkins_home/.ssh/id_rsa\n#  COPY keys/known_hosts /var/jenkins_home/.ssh/known_hosts\n#\n#  USER root\n#  RUN chmod 600 /var/jenkins_home/.ssh/id_rsa\n#  RUN chmod 644 /var/jenkins_home/.ssh/id_rsa.pub\n#  # ssh-keyscan -H github.com >> ~/.ssh/known_hosts\n#  # ssh-keyscan -H bitbucket.org >> ~/.ssh/known_hosts\n","originalDockerfileUglifiedHash":"b760f3a9e833b94c8f72490f74aa3946","fileName":"/ICSME-replicationpackage/dataset/smelly_dockerfiles_bianncle/cfcba23f9af4152ed9aa70d812aee55cad45be6a.dockerfile"}